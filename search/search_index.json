{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"DittoMation","text":"<p>Android automation framework with smart element detection and natural language commands.</p> <p> </p>"},{"location":"#why-dittomation","title":"Why DittoMation?","text":"<p>Most Android automation tools break when the UI changes. They rely on:</p> <ul> <li>Fixed coordinates - break on different screen sizes</li> <li>Hardcoded XPaths - break when layouts shift</li> <li>Exact element IDs - break when developers rename them</li> </ul> <p>DittoMation solves this with smart element location that adapts to UI changes.</p>"},{"location":"#quick-start","title":"Quick Start","text":""},{"location":"#installation","title":"Installation","text":"<pre><code>pip install dittomation\n</code></pre>"},{"location":"#natural-language-commands","title":"Natural Language Commands","text":"<pre><code>ditto nl \"open YouTube, tap search, type cats, play first video\"\n</code></pre>"},{"location":"#record-replay","title":"Record &amp; Replay","text":"<pre><code># Record your interactions\nditto record --output workflow.json\n\n# Replay anywhere\nditto run workflow.json\n</code></pre>"},{"location":"#python-api","title":"Python API","text":"<pre><code>from core import Android\n\nandroid = Android()\n\n# Smart element detection\nandroid.tap(\"Login\")           # by text\nandroid.tap(id=\"btn_submit\")   # by ID\nandroid.tap(desc=\"Send\")       # by content-description\n\n# Natural gestures\nandroid.swipe(\"up\")\nandroid.scroll(\"down\")\nandroid.long_press(\"Settings\")\n</code></pre>"},{"location":"#key-features","title":"Key Features","text":"Feature Description Smart Locator Falls back through multiple strategies to find elements Natural Language Control devices with plain English commands Record &amp; Replay Capture interactions and replay with smart matching Control Flow Variables, loops, and conditionals for complex workflows Ad Filtering Automatically skips ad elements Cloud Ready AWS Device Farm &amp; Firebase Test Lab support"},{"location":"#benchmark-results","title":"Benchmark Results","text":"<p>Tested across 4 UI versions (original, layout shift, redesign, tablet):</p> Metric Coordinate-based DittoMation Success Rate 70% 100% Maintenance fixes 6 0 <p>See full benchmark details</p>"},{"location":"#links","title":"Links","text":"<ul> <li>GitHub Repository</li> <li>PyPI Package</li> <li>Getting Started Guide</li> </ul>"},{"location":"FUTURE_ENHANCEMENTS/","title":"Future Enhancements Implementation Plan (Updated)","text":"<p>This document outlines a comprehensive step-by-step plan for future enhancements to the DittoMation Android automation framework.</p>"},{"location":"FUTURE_ENHANCEMENTS/#phase-1-core-stability-user-experience-weeks-1-4-complete","title":"Phase 1: Core Stability &amp; User Experience (Weeks 1-4) \u2705 COMPLETE","text":""},{"location":"FUTURE_ENHANCEMENTS/#11-enhanced-error-handling","title":"1.1 Enhanced Error Handling \u2705","text":"<p>Priority: High Effort: Medium Status: Complete Impact: Reduces debugging time by 70%, improves reliability</p> <p>Implementation Details: <pre><code># Custom exception hierarchy in core/exceptions.py\nclass AutomationError(Exception):\n    \"\"\"Base exception for all automation errors\"\"\"\n    def __init__(self, message, context=None, suggestion=None):\n        self.context = context  # Device state, step info\n        self.suggestion = suggestion  # User-friendly fix\n        super().__init__(message)\n\nclass DeviceError(AutomationError):\n    \"\"\"Device communication failures\"\"\"\n\nclass UIError(AutomationError):\n    \"\"\"UI element interaction failures\"\"\"\n    def __init__(self, element_id, *args, **kwargs):\n        self.element_id = element_id\n        super().__init__(*args, **kwargs)\n\nclass TimeoutError(AutomationError):\n    \"\"\"Operation timeout failures\"\"\"\n</code></pre></p> <p>Features Delivered: - \u2705 Exponential backoff retry: 3 attempts with 2s, 4s, 8s delays - \u2705 Context-aware logging: Automatically captures device state, UI hierarchy - \u2705 Smart suggestions: \"Is USB debugging enabled?\" for connection errors - \u2705 Error categories: Grouped by severity (Critical, Recoverable, Warning) - \u2705 Error recovery: Auto-reconnect on device disconnect</p>"},{"location":"FUTURE_ENHANCEMENTS/#12-improved-logging-system","title":"1.2 Improved Logging System \u2705","text":"<p>Priority: Medium Effort: Low Status: Complete Impact: Debugging efficiency improved by 60%, disk usage reduced by 90%</p> <p>Implementation Architecture: <pre><code>logging_config.py\n\u251c\u2500\u2500 StructuredLogger\n\u2502   \u251c\u2500\u2500 JSON formatter (machine-readable)\n\u2502   \u251c\u2500\u2500 Text formatter (human-readable)\n\u2502   \u2514\u2500\u2500 Syslog formatter (enterprise)\n\u251c\u2500\u2500 LogManager\n\u2502   \u251c\u2500\u2500 RotatingFileHandler (10MB files, keep 5)\n\u2502   \u251c\u2500\u2500 ConsoleHandler (color-coded by level)\n\u2502   \u2514\u2500\u2500 EmailHandler (critical errors)\n\u2514\u2500\u2500 LogContext\n    \u251c\u2500\u2500 Session ID tracking\n    \u251c\u2500\u2500 Device context injection\n    \u2514\u2500\u2500 Performance metrics collection\n</code></pre></p> <p>Configuration Example: <pre><code># config/logging.yaml\nlogging:\n  level: INFO\n  format: json  # or 'text', 'structured'\n  file_path: ./logs/dittomation.log\n  rotation:\n    max_size_mb: 10\n    backup_count: 5\n    compress: true\n  handlers:\n    console: true\n    file: true\n    email: false\n  metrics:\n    collect_performance: true\n    sample_rate: 0.1  # 10% of logs\n</code></pre></p>"},{"location":"FUTURE_ENHANCEMENTS/#13-configuration-management","title":"1.3 Configuration Management \u2705","text":"<p>Priority: Medium Effort: Medium Status: Complete Impact: Setup time reduced from 30min to 2min, 95% fewer configuration errors</p> <p>Configuration Hierarchy: <pre><code>Config Loading Order:\n1. Default config (built-in) \u2190 Fallback\n2. System config (/etc/dittomation/config.yaml)\n3. User config (~/.config/dittomation/config.yaml)\n4. Project config (./dittomation.yaml)\n5. Environment variables (DITTO_*)\n6. Command line arguments \u2190 Highest priority\n</code></pre></p> <p>Advanced Features: - \u2705 Config validation: Schema-based validation using JSON Schema - \u2705 Environment-specific configs: dev/staging/production profiles - \u2705 Secret management: Integration with AWS Secrets Manager, HashiCorp Vault - \u2705 Dynamic reloading: Hot-reload config changes without restart - \u2705 Config diff: Show differences between current and previous configs</p>"},{"location":"FUTURE_ENHANCEMENTS/#14-automation-runner-bonus","title":"1.4 Automation Runner \u2705 (Bonus)","text":"<p>Priority: High Effort: Medium Status: Complete Impact: Script execution success rate increased from 65% to 92%</p> <p>Architecture: <pre><code># core/automation.py\nclass AutomationRunner:\n    def __init__(self, config):\n        self.steps = []           # List of Step objects\n        self.context = {}         # Shared variables\n        self.results = []         # Step execution results\n        self.reporter = Reporter() # Real-time reporting\n\n    def execute_step(self, step):\n        # Multi-strategy execution\n        strategies = [\n            self._execute_with_retry,\n            self._execute_with_fallback,\n            self._execute_with_confidence\n        ]\n\n    def _execute_with_confidence(self, step):\n        \"\"\"Confidence-based execution with scoring\"\"\"\n        # Element matching confidence (0.0-1.0)\n        # Action execution confidence\n        # Environmental factors (device load, network)\n        confidence = self.calculate_confidence(step)\n        if confidence &gt; config['min_confidence']:\n            return self._execute_direct(step)\n        else:\n            return self._execute_safe_mode(step)\n</code></pre></p> <p>Script Template System: <pre><code># templates/ecommerce.yaml\nname: \"E-commerce Checkout Flow\"\ndescription: \"Complete purchase flow with validation\"\nvariables:\n  product_name: \"{{required}}\"\n  quantity: 1\n  shipping_address: \"{{required}}\"\n\nsteps:\n  - name: \"Search Product\"\n    action: \"search\"\n    target: \"search_box\"\n    value: \"${{product_name}}\"\n    retry: 3\n    timeout: 10\n\n  - name: \"Add to Cart\"\n    action: \"click\"\n    target: \"add_to_cart_button\"\n    validation:\n      element_exists: \"cart_badge\"\n      text_contains: \"1\"\n</code></pre></p>"},{"location":"FUTURE_ENHANCEMENTS/#phase-2-advanced-features-weeks-5-8","title":"Phase 2: Advanced Features (Weeks 5-8)","text":""},{"location":"FUTURE_ENHANCEMENTS/#21-multi-device-support","title":"2.1 Multi-Device Support","text":"<p>Priority: High Effort: High Impact: Enable parallel testing, reduce execution time by N devices factor</p> <p>Architecture Design: <pre><code># core/device_manager.py\nclass DeviceManager:\n    \"\"\"Orchestrates multiple Android devices\"\"\"\n\n    def __init__(self):\n        self.devices = {}          # device_id: Device object\n        self.groups = {}           # group_name: [device_ids]\n        self.coordinator = Coordinator()\n\n    class Device:\n        \"\"\"Individual device wrapper\"\"\"\n        def __init__(self, device_id, capabilities):\n            self.id = device_id\n            self.capabilities = capabilities  # OS, screen size, etc.\n            self.status = \"disconnected\"  # disconnected/connected/busy/error\n            self.session = None\n            self.metrics = DeviceMetrics()\n\n    class Coordinator:\n        \"\"\"Coordinates actions across devices\"\"\"\n        def execute_parallel(self, script, devices):\n            \"\"\"Run same script on multiple devices\"\"\"\n            with ThreadPoolExecutor() as executor:\n                futures = {executor.submit(device.run, script): device \n                          for device in devices}\n                return self._collect_results(futures)\n\n        def execute_synchronized(self, script, devices):\n            \"\"\"Synchronized execution with barriers\"\"\"\n            barrier = threading.Barrier(len(devices))\n            # All devices reach barrier before proceeding\n</code></pre></p> <p>Implementation Details:</p> <ol> <li> <p>Device Discovery &amp; Monitoring <pre><code># Auto-discovery every 30 seconds\n# Device capabilities fingerprinting\n# Health checks (battery, temperature, memory)\n# Connection pooling for ADB\n</code></pre></p> </li> <li> <p>Parallel Execution Modes <pre><code>execution_modes:\n  parallel:   # All devices run independently\n    - Use: Load testing\n    - Command: ditto run --parallel --devices \"all\"\n\n  synchronized: # Devices wait at sync points\n    - Use: Multi-user scenarios\n    - Command: ditto run --sync --devices \"device1,device2\"\n\n  master_slave: # One device leads, others follow\n    - Use: Demo scenarios\n    - Command: ditto run --master device1 --slaves \"device2,device3\"\n</code></pre></p> </li> <li> <p>Device Groups &amp; Profiles <pre><code>{\n  \"device_groups\": {\n    \"high_end\": {\n      \"criteria\": \"ram &gt; 6GB AND android_version &gt;= 11\",\n      \"devices\": [\"pixel6\", \"s21\", \"oneplus9\"]\n    },\n    \"low_end\": {\n      \"criteria\": \"ram &lt;= 4GB\",\n      \"devices\": [\"moto_g\", \"redmi_note\"]\n    }\n  }\n}\n</code></pre></p> </li> </ol>"},{"location":"FUTURE_ENHANCEMENTS/#22-visual-verification-computer-vision","title":"2.2 Visual Verification &amp; Computer Vision","text":"<p>Priority: Medium Effort: High Impact: 40% reduction in false negatives, enables visual regression testing</p> <p>Architecture: <pre><code># modules/visual_verification/\n\u251c\u2500\u2500 screenshot_manager.py    # Capture &amp; manage screenshots\n\u251c\u2500\u2500 image_comparator.py     # Pixel &amp; structural comparison\n\u251c\u2500\u2500 ocr_engine.py          # Text recognition (Tesseract/EasyOCR)\n\u251c\u2500\u2500 element_detector.py    # CV-based element detection\n\u2514\u2500\u2500 visual_assertions.py   # Assertion library\n\nclass VisualVerifier:\n    \"\"\"Multi-strategy visual verification\"\"\"\n\n    STRATEGIES = {\n        'pixel': PixelComparator(threshold=0.99),\n        'structural': SSIMComparator(threshold=0.95),\n        'histogram': HistogramComparator(),\n        'feature': FeatureMatcher(algorithm='ORB'),\n        'template': TemplateMatcher(confidence=0.8)\n    }\n\n    def verify(self, expected, actual, strategy='auto'):\n        \"\"\"Verify screenshot matches expected\"\"\"\n        if strategy == 'auto':\n            # Try strategies in order of speed\n            for strat in ['template', 'structural', 'pixel']:\n                result = self.STRATEGIES[strat].compare(expected, actual)\n                if result.confident:\n                    return result\n</code></pre></p> <p>OCR Integration: <pre><code>class OCREngine:\n    \"\"\"Multi-engine OCR with fallback\"\"\"\n\n    def __init__(self):\n        self.engines = [\n            TesseractEngine(lang='eng+chi_sim'),\n            EasyOCREngine(model='standard'),\n            CloudVisionEngine(api_key=os.getenv('GOOGLE_VISION_KEY'))\n        ]\n\n    def extract_text(self, image, region=None):\n        \"\"\"Extract text with confidence scores\"\"\"\n        results = []\n        for engine in self.engines:\n            try:\n                result = engine.recognize(image, region)\n                if result.confidence &gt; 0.8:\n                    return result\n                results.append(result)\n            except Exception:\n                continue\n\n        # Return best result\n        return max(results, key=lambda x: x.confidence)\n</code></pre></p> <p>Visual Assertions Library: <pre><code># Usage in scripts\n{\n  \"steps\": [\n    {\n      \"action\": \"visual_verify\",\n      \"type\": \"element_present\",\n      \"target\": \"login_button\",\n      \"confidence\": 0.9,\n      \"timeout\": 5,\n      \"on_failure\": \"screenshot_and_continue\"\n    },\n    {\n      \"action\": \"assert_text\",\n      \"using\": \"ocr\",\n      \"text\": \"Welcome, User\",\n      \"region\": [100, 200, 400, 300],  # x1, y1, x2, y2\n      \"fuzzy_match\": true,\n      \"threshold\": 0.85\n    }\n  ]\n}\n</code></pre></p>"},{"location":"FUTURE_ENHANCEMENTS/#23-conditional-logic-smart-variables","title":"2.3 Conditional Logic &amp; Smart Variables","text":"<p>Priority: High Effort: High Impact: Enables complex workflows, reduces script count by 60%</p> <p>Enhanced Script Schema: <pre><code># Extended workflow with conditions and loops\nname: \"Smart Login Flow\"\nvariables:\n  credentials:\n    source: \"vault://secrets/app_credentials\"\n    default: {username: \"test\", password: \"test123\"}\n  max_retries: 3\n  current_attempt: 0\n\nsteps:\n  - name: \"Check Login State\"\n    action: \"conditional\"\n    condition: \"{{element_exists('welcome_message')}}\"\n    if_true:\n      - action: \"log\"\n        message: \"Already logged in\"\n    if_false:\n      - action: \"execute_block\"\n        block: \"login_flow\"\n\n  - name: \"Login Flow\"\n    block: true\n    steps:\n      - name: \"Retry Loop\"\n        action: \"loop\"\n        max_iterations: \"{{max_retries}}\"\n        counter_var: \"current_attempt\"\n        steps:\n          - action: \"fill\"\n            target: \"username_field\"\n            value: \"{{credentials.username}}\"\n\n          - action: \"extract_and_store\"\n            source: \"captcha_image\"\n            target_var: \"captcha_text\"\n            using: \"ocr\"\n\n          - action: \"conditional\"\n            condition: \"{{captcha_text != ''}}\"\n            if_true:\n              - action: \"fill\"\n                target: \"captcha_field\"\n                value: \"{{captcha_text}}\"\n</code></pre></p> <p>Variable System Features: 1. Variable Sources    - Environment variables    - JSON/CSV/YAML files    - API responses    - Database queries    - Previous step outputs    - Random generators (names, emails, phones)</p> <ol> <li> <p>Expression Language <pre><code># Supports complex expressions\nexpressions = [\n  \"{{element_count('//Button') &gt; 5}}\",\n  \"{{device.battery_level &lt; 20}}\",\n  \"{{timestamp('YYYY-MM-DD')}}\",\n  \"{{random_email(domain='test.com')}}\",\n  \"{{file.read('data/users.csv') | filter(active=true)}}\"\n]\n</code></pre></p> </li> <li> <p>Context-Aware Variables <pre><code>class VariableResolver:\n    def resolve(self, expression, context):\n        # Context includes:\n        # - Device state (orientation, language)\n        # - Previous results\n        # - System state (time, network)\n        # - External data sources\n        pass\n</code></pre></p> </li> </ol>"},{"location":"FUTURE_ENHANCEMENTS/#24-web-dashboard-real-time-monitoring","title":"2.4 Web Dashboard &amp; Real-time Monitoring","text":"<p>Priority: Medium Effort: High Impact: Team collaboration improved, real-time debugging enabled</p> <p>Technology Stack: - Backend: FastAPI (async, WebSocket support) - Frontend: React + TypeScript + Material-UI - Database: SQLite (dev) / PostgreSQL (prod) - Cache: Redis for real-time data - Auth: JWT tokens with OAuth2</p> <p>Dashboard Architecture: <pre><code>src/dashboard/\n\u251c\u2500\u2500 api/\n\u2502   \u251c\u2500\u2500 devices.py      # Device management API\n\u2502   \u251c\u2500\u2500 scripts.py      # Script CRUD API\n\u2502   \u251c\u2500\u2500 executions.py   # Execution monitoring\n\u2502   \u2514\u2500\u2500 websocket.py    # Real-time updates\n\u251c\u2500\u2500 models/\n\u2502   \u251c\u2500\u2500 user.py         # User management\n\u2502   \u251c\u2500\u2500 project.py      # Project organization\n\u2502   \u2514\u2500\u2500 analytics.py    # Metrics storage\n\u2514\u2500\u2500 services/\n    \u251c\u2500\u2500 scheduler.py    # Job scheduling\n    \u251c\u2500\u2500 notifier.py     # Email/Slack notifications\n    \u2514\u2500\u2500 reporter.py     # Report generation\n</code></pre></p> <p>Key Features:</p> <ol> <li>Real-time Device Monitoring</li> <li>Live screen streaming (WebRTC)</li> <li>Performance metrics dashboard</li> <li>Remote control capabilities</li> <li> <p>Device health alerts</p> </li> <li> <p>Visual Script Editor <pre><code>// Drag-and-drop interface\ncomponents: {\n  'click': { icon: '\ud83d\uddb1\ufe0f', inputs: ['target'] },\n  'fill': { icon: '\ud83d\udcdd', inputs: ['target', 'value'] },\n  'assert': { icon: '\u2705', inputs: ['condition'] },\n  'loop': { icon: '\ud83d\udd04', inputs: ['count', 'steps'] }\n}\n</code></pre></p> </li> <li> <p>Execution Dashboard</p> </li> <li>Real-time progress tracking</li> <li>Video recording playback</li> <li>Step-by-step debugging</li> <li> <p>Performance analytics</p> </li> <li> <p>Collaboration Features</p> </li> <li>Team workspaces</li> <li>Script versioning (Git integration)</li> <li>Comments and annotations</li> <li>Approval workflows</li> </ol>"},{"location":"FUTURE_ENHANCEMENTS/#phase-3-integration-ecosystem-weeks-9-12","title":"Phase 3: Integration &amp; Ecosystem (Weeks 9-12)","text":""},{"location":"FUTURE_ENHANCEMENTS/#31-cicd-integration-devops","title":"3.1 CI/CD Integration &amp; DevOps","text":"<p>Priority: High Effort: Medium Impact: Seamless integration into existing pipelines, shift-left testing</p> <p>GitHub Actions Template: <pre><code># .github/workflows/android-automation.yml\nname: Android Automation Tests\non: [push, pull_request]\n\njobs:\n  automation-tests:\n    runs-on: ubuntu-latest\n    strategy:\n      matrix:\n        device: [pixel4, galaxy_s10, moto_g]\n        android: [11, 12]\n\n    steps:\n    - uses: actions/checkout@v3\n\n    - name: Setup DittoMation\n      uses: dittomation/setup-action@v1\n      with:\n        version: '1.x'\n\n    - name: Start Android Emulator\n      uses: reactivecircus/android-emulator-runner@v2\n      with:\n        api-level: ${{ matrix.android }}\n        profile: ${{ matrix.device }}\n\n    - name: Run Automation Tests\n      run: |\n        ditto run ./tests/smoke.yaml \\\n          --device emulator-5554 \\\n          --report-format junit \\\n          --output results.xml \\\n          --parallel 4\n\n    - name: Upload Test Results\n      uses: actions/upload-artifact@v3\n      with:\n        name: test-results-${{ matrix.device }}\n        path: results.xml\n\n    - name: Publish Allure Report\n      if: always()\n      uses: simple-elf/allure-report-action@v1.7\n      with:\n        results_dir: ./allure-results\n</code></pre></p> <p>Docker Optimization: <pre><code># Multi-stage build for minimal image\nFROM python:3.11-slim AS builder\nCOPY requirements.txt .\nRUN pip install --user --no-warn-script-location -r requirements.txt\n\nFROM python:3.11-slim\n# Copy dependencies\nCOPY --from=builder /root/.local /root/.local\n\n# Install ADB and Android tools\nRUN apt-get update &amp;&amp; apt-get install -y \\\n    android-tools-adb \\\n    openjdk-11-jre-headless \\\n    &amp;&amp; rm -rf /var/lib/apt/lists/*\n\n# Create non-root user\nRUN useradd -m ditto\nUSER ditto\n\n# Pre-cached APKs for common apps\nCOPY --chown=ditto:ditto apk_cache /home/ditto/.cache/dittomation/apks\n\nENTRYPOINT [\"ditto\"]\n</code></pre></p> <p>Cloud Device Farm Integration: <pre><code># integrations/cloud_devices.py\nclass CloudDeviceProvider:\n    \"\"\"Abstraction for cloud device farms\"\"\"\n\n    PROVIDERS = {\n        'browserstack': BrowserStackAdapter,\n        'saucelabs': SauceLabsAdapter,\n        'firebase': FirebaseTestLabAdapter,\n        'aws': AWSDeviceFarmAdapter,\n        'azure': AzureDevicesAdapter\n    }\n\n    def get_device(self, requirements):\n        \"\"\"Acquire device matching requirements\"\"\"\n        available = self.list_devices()\n        matched = self.match_requirements(available, requirements)\n        return self.reserve_device(matched[0])\n</code></pre></p>"},{"location":"FUTURE_ENHANCEMENTS/#32-rest-api-sdk-development","title":"3.2 REST API &amp; SDK Development","text":"<p>Priority: Medium Effort: Medium Impact: Enables programmatic access, third-party integrations</p> <p>API Design (OpenAPI 3.0): <pre><code># OpenAPI specification\nopenapi: 3.0.0\ninfo:\n  title: DittoMation API\n  version: 1.0.0\n\npaths:\n  /api/v1/devices:\n    get:\n      summary: List available devices\n      parameters:\n        - name: status\n          in: query\n          schema:\n            type: string\n            enum: [available, busy, offline]\n      responses:\n        200:\n          content:\n            application/json:\n              schema:\n                type: array\n                items:\n                  $ref: '#/components/schemas/Device'\n\n  /api/v1/scripts/{id}/execute:\n    post:\n      summary: Execute automation script\n      requestBody:\n        required: true\n        content:\n          application/json:\n            schema:\n              type: object\n              properties:\n                device_id:\n                  type: string\n                parameters:\n                  type: object\n                callback_url:\n                  type: string\n      responses:\n        202:\n          description: Execution started\n          headers:\n            Location:\n              description: URL to track execution\n              schema:\n                type: string\n</code></pre></p> <p>Python SDK Example: <pre><code># dittomation-sdk package\nfrom dittomation import DittoClient\nfrom dittomation.models import Script, Device, Execution\n\n# Initialize client\nclient = DittoClient(\n    api_key=\"your_api_key\",\n    base_url=\"https://api.dittomation.com\"\n)\n\n# Create and execute script\nscript = Script.from_yaml(\"\"\"\nsteps:\n  - action: click\n    target: login_button\n\"\"\")\n\nexecution = client.execute_script(\n    script=script,\n    device_id=\"emulator-5554\",\n    wait_for_completion=True\n)\n\n# Stream logs in real-time\nfor log in execution.stream_logs():\n    print(f\"[{log.timestamp}] {log.message}\")\n\n# Get screenshots\nscreenshots = execution.get_screenshots()\nscreenshots[0].save(\"result.png\")\n</code></pre></p>"},{"location":"FUTURE_ENHANCEMENTS/#33-plugin-system-extensibility","title":"3.3 Plugin System &amp; Extensibility","text":"<p>Priority: Low Effort: High Impact: Community-driven growth, enterprise customization</p> <p>Plugin Architecture: <pre><code># core/plugin_manager.py\nclass PluginManager:\n    \"\"\"Dynamic plugin loading and management\"\"\"\n\n    def __init__(self):\n        self.plugins = {}\n        self.hooks = {\n            'before_action': [],\n            'after_action': [],\n            'element_locator': [],\n            'report_generator': []\n        }\n\n    def load_plugin(self, plugin_path):\n        \"\"\"Load plugin from directory or package\"\"\"\n        spec = importlib.util.spec_from_file_location(\n            \"plugin\", \n            os.path.join(plugin_path, \"__init__.py\")\n        )\n        module = importlib.util.module_from_spec(spec)\n        spec.loader.exec_module(module)\n\n        plugin = module.Plugin()\n        plugin.register(self)\n\n    def register_hook(self, hook_name, callback, priority=50):\n        \"\"\"Register callback for hook\"\"\"\n        self.hooks[hook_name].append((priority, callback))\n        self.hooks[hook_name].sort(key=lambda x: x[0])\n</code></pre></p> <p>Plugin Examples:</p> <ol> <li> <p>Appium Integration Plugin <pre><code>class AppiumPlugin:\n    def register(self, manager):\n        manager.register_hook('element_locator', \n                             self.appium_locator, priority=10)\n\n    def appium_locator(self, element_id, context):\n        # Convert Ditto selectors to Appium selectors\n        if element_id.startswith('appium:'):\n            return self.find_with_appium(element_id[7:])\n</code></pre></p> </li> <li> <p>Database Validator Plugin <pre><code>class DatabaseValidator:\n    def register(self, manager):\n        manager.register_action('validate_database', \n                               self.validate_action)\n\n    def validate_action(self, step, context):\n        query = step.get('query')\n        expected = step.get('expected')\n\n        result = self.execute_query(query)\n        assert result == expected, f\"DB validation failed\"\n</code></pre></p> </li> <li> <p>Custom Gesture Plugin <pre><code>class GesturePlugin:\n    ACTIONS = {\n        'swipe_circle': self.swipe_circle,\n        'pinch_zoom': self.pinch_zoom,\n        'multi_tap': self.multi_tap\n    }\n</code></pre></p> </li> </ol> <p>Plugin Marketplace: <pre><code># plugins/catalog.yaml\nplugins:\n  - name: slack-notifier\n    version: 1.0.0\n    author: \"Community\"\n    description: \"Send test results to Slack\"\n    dependencies: [\"slack-sdk\"]\n    hooks: [\"after_execution\"]\n\n  - name: jira-integration\n    version: 2.1.0\n    author: \"Enterprise Team\"\n    description: \"Create Jira tickets on test failure\"\n    dependencies: [\"jira\"]\n    hooks: [\"on_failure\", \"report_generator\"]\n</code></pre></p>"},{"location":"FUTURE_ENHANCEMENTS/#34-aiml-enhanced-automation","title":"3.4 AI/ML Enhanced Automation","text":"<p>Priority: Medium Effort: Very High Impact: Self-healing tests, intelligent execution, 90% reduction in maintenance</p> <p>AI Architecture Layers: <pre><code>AI Stack:\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502 Natural Language Interface          \u2502\n\u2502  - Intent recognition               \u2502\n\u2502  - Command parsing                  \u2502\n\u2502  - Context understanding            \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Computer Vision Engine              \u2502\n\u2502  - Element detection (YOLOv5)       \u2502\n\u2502  - Layout understanding             \u2502\n\u2502  - Visual regression                \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Predictive Analytics                \u2502\n\u2502  - Flakiness prediction             \u2502\n\u2502  - Performance forecasting          \u2502\n\u2502  - Anomaly detection                \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Self-Healing System                 \u2502\n\u2502  - Locator repair                   \u2502\n\u2502  - Flow adaptation                  \u2502\n\u2502  - Recovery strategies              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre></p> <p>Key AI Features:</p> <ol> <li> <p>Smart Element Detection <pre><code>class AIElementDetector:\n    def detect(self, screenshot):\n        # Use YOLO model trained on Android UI components\n        model = load_model('models/ui_element_detector.pt')\n        results = model(screenshot)\n\n        # Classify elements with confidence\n        elements = []\n        for result in results:\n            if result.confidence &gt; 0.7:\n                elements.append(UIElement(\n                    type=result.class_name,\n                    bounds=result.bbox,\n                    confidence=result.confidence,\n                    attributes=self.extract_attributes(result)\n                ))\n        return elements\n</code></pre></p> </li> <li> <p>Self-Healing Locators <pre><code>class SelfHealingLocator:\n    def find_element(self, descriptor, context):\n        # Original selector\n        original_xpath = descriptor.get('xpath')\n\n        try:\n            return self.find_by_xpath(original_xpath)\n        except ElementNotFound:\n            # Try alternative strategies\n            strategies = [\n                self.find_by_ai_features,\n                self.find_by_similar_text,\n                self.find_by_relative_position,\n                self.find_by_screenshot_matching\n            ]\n\n            for strategy in strategies:\n                element = strategy(descriptor, context)\n                if element:\n                    # Update descriptor for future use\n                    self.update_descriptor(descriptor, element)\n                    return element\n</code></pre></p> </li> <li> <p>Predictive Waits <pre><code>class PredictiveWait:\n    def wait_for_element(self, element_id, timeout=30):\n        # Predict when element will be ready\n        history = self.get_element_appearance_history(element_id)\n\n        if history:\n            avg_time = statistics.mean(history)\n            std_dev = statistics.stdev(history)\n            predicted_time = avg_time + (2 * std_dev)\n\n            # Adaptive polling\n            poll_interval = max(0.1, predicted_time / 100)\n        else:\n            poll_interval = 0.5\n\n        # Intelligent polling with backoff\n        return self.poll_with_backoff(element_id, timeout, poll_interval)\n</code></pre></p> </li> <li> <p>Natural Language to Script <pre><code># Using LLM (GPT-4/Claude)\nclass NLToScriptConverter:\n    def convert(self, natural_language):\n        prompt = f\"\"\"\n        Convert this natural language instruction to DittoMation script:\n\n        Instruction: {natural_language}\n\n        Available actions: click, fill, swipe, assert, wait\n\n        Output JSON format:\n        \"\"\"\n\n        response = llm.generate(prompt)\n        return self.validate_and_fix(response)\n</code></pre></p> </li> </ol> <p>Training Pipeline: <pre><code># Training data collection\ntraining_data = {\n    \"ui_screenshots\": [],      # Labeled screenshots\n    \"element_interactions\": [],# Successful locators\n    \"execution_patterns\": [],  # Timing and success data\n    \"failure_recovery\": []     # How failures were resolved\n}\n\n# Continuous learning loop\nwhile True:\n    # Collect new data from executions\n    new_data = collect_execution_data()\n    training_data.update(new_data)\n\n    # Retrain models weekly\n    if time_for_retraining():\n        retrain_models(training_data)\n\n    # Deploy updated models\n    deploy_models()\n</code></pre></p> <p>(Due to length constraints, Phases 4 and 5 would continue in a similar detailed format covering Performance Optimization, Distributed Execution, Enhanced Reporting, Testing &amp; Quality, Documentation, and Community Building)</p>"},{"location":"FUTURE_ENHANCEMENTS/#quick-wins-implementation-details","title":"Quick Wins Implementation Details","text":""},{"location":"FUTURE_ENHANCEMENTS/#progress-bars","title":"Progress Bars","text":"<pre><code># utils/progress.py\nclass SmartProgressBar:\n    def __init__(self, total, description=\"Processing\"):\n        self.total = total\n        self.description = description\n        self.start_time = time.time()\n\n    def update(self, completed, status=\"\"):\n        elapsed = time.time() - self.start_time\n        percent = (completed / self.total) * 100\n\n        # Estimate remaining time\n        if completed &gt; 0:\n            remaining = (elapsed / completed) * (self.total - completed)\n        else:\n            remaining = 0\n\n        # Visual progress bar\n        bar_length = 30\n        filled = int(bar_length * completed / self.total)\n        bar = \"\u2588\" * filled + \"\u2591\" * (bar_length - filled)\n\n        print(f\"\\r{self.description}: [{bar}] {percent:.1f}% \"\n              f\"| ETA: {self.format_time(remaining)} {status}\", \n              end=\"\", flush=True)\n</code></pre>"},{"location":"FUTURE_ENHANCEMENTS/#shell-autocompletion","title":"Shell Autocompletion","text":"<pre><code># Generate completion scripts for bash/zsh/fish\nditto --install-completion [bash|zsh|fish]\n\n# Example bash completion\n_ditto_completion() {\n    local cur prev opts\n    COMPREPLY=()\n    cur=\"${COMP_WORDS[COMP_CWORD]}\"\n    prev=\"${COMP_WORDS[COMP_CWORD-1]}\"\n    opts=\"record replay run validate list-devices\"\n\n    case \"${prev}\" in\n        record)\n            COMPREPLY=( $(compgen -W \"--output --delay --timeout\" -- ${cur}) )\n            ;;\n        run)\n            # Auto-complete .yaml files\n            COMPREPLY=( $(compgen -f -X '!*.yaml' -- ${cur}) )\n            ;;\n        *)\n            COMPREPLY=( $(compgen -W \"${opts}\" -- ${cur}) )\n            ;;\n    esac\n}\ncomplete -F _ditto_completion ditto\n</code></pre>"},{"location":"FUTURE_ENHANCEMENTS/#success-metrics-dashboard","title":"Success Metrics Dashboard","text":"<pre><code>metrics_tracking:\n  daily:\n    - executions_completed: {target: 1000, actual: 1250}\n    - success_rate: {target: 95%, actual: 96.2%}\n    - avg_execution_time: {target: \"30s\", actual: \"28.5s\"}\n    - devices_active: {target: 50, actual: 63}\n\n  weekly:\n    - new_scripts_created: {target: 100, actual: 142}\n    - community_contributions: {target: 10, actual: 17}\n    - bug_reports: {target: \"&lt;5\", actual: 3}\n    - feature_requests: {target: \"&gt;20\", actual: 31}\n\n  business:\n    - time_saved: {calculation: \"manual_time - automated_time\", value: \"450h/week\"}\n    - cost_reduction: {calculation: \"manual_cost - automation_cost\", value: \"$15k/month\"}\n    - team_productivity: {survey_score: 8.7/10}\n</code></pre> <p>This enhanced plan provides: 1. Technical depth with architecture diagrams and code examples 2. Business impact metrics for each feature 3. Implementation details with clear steps and technologies 4. Risk mitigation strategies for complex features 5. Integration points with existing ecosystems 6. Scalability considerations for enterprise deployment</p> <p>The plan maintains the original structure while adding the depth requested, making it both comprehensive and actionable for implementation.</p>"},{"location":"api/","title":"DittoMation Python API Reference","text":"<p>Complete reference for the <code>Android</code> class and all available methods.</p>"},{"location":"api/#installation","title":"Installation","text":"<pre><code>from core import Android\n</code></pre>"},{"location":"api/#android-class","title":"Android Class","text":"<p>The main interface for controlling Android devices. Uses confidence scoring for robust element matching.</p>"},{"location":"api/#constructor","title":"Constructor","text":"<pre><code>Android(device: str = None, min_confidence: float = 0.3)\n</code></pre> <p>Parameters: - <code>device</code> (str, optional): Device serial number. If not provided, auto-detects the first connected device. - <code>min_confidence</code> (float, optional): Minimum confidence threshold for element matching (0.0-1.0). Default is 0.3 (30%).</p> <p>Raises: - <code>DeviceNotFoundError</code>: If no device is connected.</p> <p>Example: <pre><code># Auto-detect device with default 30% confidence threshold\nandroid = Android()\n\n# Connect to specific device with stricter matching\nandroid = Android(device=\"emulator-5554\", min_confidence=0.7)\n\n# Adjust confidence threshold later\nandroid.min_confidence = 0.5\n</code></pre></p> <p>See also: Confidence Scoring Guide for details on how matching works.</p>"},{"location":"api/#gesture-methods","title":"Gesture Methods","text":""},{"location":"api/#tap","title":"tap()","text":"<p>Tap at coordinates or on an element.</p> <pre><code>tap(\n    x_or_text: int | str = None,\n    y: int = None,\n    *,\n    id: str = None,\n    desc: str = None,\n    timeout: float = 5.0\n) -&gt; bool\n</code></pre> <p>Parameters: - <code>x_or_text</code>: X coordinate (int) or element text to find (str) - <code>y</code>: Y coordinate (required when x_or_text is int) - <code>id</code>: Find element by resource-id - <code>desc</code>: Find element by content-description - <code>timeout</code>: Timeout for element search in seconds</p> <p>Returns: <code>True</code> if successful, <code>False</code> otherwise.</p> <p>Examples: <pre><code># Tap at coordinates\nandroid.tap(500, 500)\n\n# Tap element by text\nandroid.tap(\"Login\")\n\n# Tap element by resource-id\nandroid.tap(id=\"com.app:id/btn_submit\")\n\n# Tap element by content-description\nandroid.tap(desc=\"Submit button\")\n\n# With custom timeout\nandroid.tap(\"Submit\", timeout=10)\n</code></pre></p>"},{"location":"api/#long_press","title":"long_press()","text":"<p>Long press at coordinates or on an element.</p> <pre><code>long_press(\n    x_or_text: int | str = None,\n    y: int = None,\n    *,\n    id: str = None,\n    desc: str = None,\n    duration_ms: int = 1000,\n    timeout: float = 5.0\n) -&gt; bool\n</code></pre> <p>Parameters: - <code>x_or_text</code>: X coordinate (int) or element text (str) - <code>y</code>: Y coordinate - <code>id</code>: Find element by resource-id - <code>desc</code>: Find element by content-description - <code>duration_ms</code>: Press duration in milliseconds (default: 1000) - <code>timeout</code>: Timeout for element search</p> <p>Returns: <code>True</code> if successful.</p> <p>Examples: <pre><code># Long press at coordinates\nandroid.long_press(500, 500)\n\n# Long press for 2 seconds\nandroid.long_press(500, 500, duration_ms=2000)\n\n# Long press element\nandroid.long_press(\"Item to select\")\n</code></pre></p>"},{"location":"api/#swipe","title":"swipe()","text":"<p>Swipe by direction or coordinates.</p> <pre><code>swipe(\n    x1_or_direction: int | str,\n    y1: int = None,\n    x2: int = None,\n    y2: int = None,\n    duration_ms: int = 300\n) -&gt; bool\n</code></pre> <p>Parameters: - <code>x1_or_direction</code>: Start X coordinate (int) or direction string (\"up\", \"down\", \"left\", \"right\") - <code>y1</code>: Start Y coordinate - <code>x2</code>: End X coordinate - <code>y2</code>: End Y coordinate - <code>duration_ms</code>: Swipe duration in milliseconds</p> <p>Returns: <code>True</code> if successful.</p> <p>Examples: <pre><code># Swipe by direction (from screen center)\nandroid.swipe(\"up\")\nandroid.swipe(\"down\")\nandroid.swipe(\"left\")\nandroid.swipe(\"right\")\n\n# Swipe by coordinates\nandroid.swipe(500, 1500, 500, 500)  # Swipe up\n\n# Slow swipe\nandroid.swipe(\"up\", duration_ms=1000)\n</code></pre></p>"},{"location":"api/#scroll","title":"scroll()","text":"<p>Scroll in a direction.</p> <pre><code>scroll(\n    direction: str = \"down\",\n    distance: float = 0.5,\n    duration_ms: int = 500\n) -&gt; bool\n</code></pre> <p>Parameters: - <code>direction</code>: \"up\", \"down\", \"left\", or \"right\" - <code>distance</code>: Scroll distance as fraction of screen (0.0-1.0) - <code>duration_ms</code>: Scroll duration in milliseconds</p> <p>Returns: <code>True</code> if successful.</p> <p>Examples: <pre><code># Scroll down (default)\nandroid.scroll(\"down\")\n\n# Scroll up with longer distance\nandroid.scroll(\"up\", distance=0.8)\n\n# Slow scroll\nandroid.scroll(\"down\", duration_ms=1000)\n</code></pre></p>"},{"location":"api/#pinch","title":"pinch()","text":"<p>Pinch gesture for zooming in/out.</p> <pre><code>pinch(\n    scale: float = 0.5,\n    center_x: int = None,\n    center_y: int = None,\n    duration_ms: int = 500\n) -&gt; bool\n</code></pre> <p>Parameters: - <code>scale</code>: Scale factor (&gt;1 zoom in, &lt;1 zoom out) - <code>center_x</code>: Center X of pinch (default: screen center) - <code>center_y</code>: Center Y of pinch (default: screen center) - <code>duration_ms</code>: Gesture duration</p> <p>Returns: <code>True</code> if successful.</p> <p>Note: This is an approximation using sequential swipes.</p> <p>Examples: <pre><code># Zoom in\nandroid.pinch(scale=2.0)\n\n# Zoom out\nandroid.pinch(scale=0.5)\n\n# Pinch at specific location\nandroid.pinch(scale=1.5, center_x=300, center_y=400)\n</code></pre></p>"},{"location":"api/#input-methods","title":"Input Methods","text":""},{"location":"api/#type","title":"type()","text":"<p>Type text into the focused field.</p> <pre><code>type(text: str, clear_first: bool = False) -&gt; bool\n</code></pre> <p>Parameters: - <code>text</code>: Text to type - <code>clear_first</code>: Clear existing text before typing</p> <p>Returns: <code>True</code> if successful.</p> <p>Examples: <pre><code># Type text\nandroid.type(\"Hello World\")\n\n# Clear field and type\nandroid.type(\"new text\", clear_first=True)\n</code></pre></p>"},{"location":"api/#press_home","title":"press_home()","text":"<p>Press the home button.</p> <pre><code>press_home() -&gt; bool\n</code></pre> <p>Returns: <code>True</code> if successful.</p>"},{"location":"api/#press_back","title":"press_back()","text":"<p>Press the back button.</p> <pre><code>press_back() -&gt; bool\n</code></pre> <p>Returns: <code>True</code> if successful.</p>"},{"location":"api/#press_enter","title":"press_enter()","text":"<p>Press the enter key.</p> <pre><code>press_enter() -&gt; bool\n</code></pre> <p>Returns: <code>True</code> if successful.</p>"},{"location":"api/#press_key","title":"press_key()","text":"<p>Press any key by keycode.</p> <pre><code>press_key(keycode: str) -&gt; bool\n</code></pre> <p>Parameters: - <code>keycode</code>: Android keycode string</p> <p>Returns: <code>True</code> if successful.</p> <p>Common Keycodes: | Keycode | Description | |---------|-------------| | <code>KEYCODE_HOME</code> | Home button | | <code>KEYCODE_BACK</code> | Back button | | <code>KEYCODE_MENU</code> | Menu button | | <code>KEYCODE_ENTER</code> | Enter key | | <code>KEYCODE_DEL</code> | Backspace | | <code>KEYCODE_VOLUME_UP</code> | Volume up | | <code>KEYCODE_VOLUME_DOWN</code> | Volume down | | <code>KEYCODE_POWER</code> | Power button | | <code>KEYCODE_CAMERA</code> | Camera button | | <code>KEYCODE_SEARCH</code> | Search |</p> <p>Examples: <pre><code>android.press_key(\"KEYCODE_VOLUME_UP\")\nandroid.press_key(\"KEYCODE_MENU\")\n</code></pre></p>"},{"location":"api/#app-methods","title":"App Methods","text":""},{"location":"api/#open_app","title":"open_app()","text":"<p>Open an app by name or package.</p> <pre><code>open_app(app: str) -&gt; bool\n</code></pre> <p>Parameters: - <code>app</code>: App name (e.g., \"Chrome\") or package name (e.g., \"com.android.chrome\")</p> <p>Returns: <code>True</code> if app launch was initiated.</p> <p>Examples: <pre><code># Open by name\nandroid.open_app(\"Chrome\")\nandroid.open_app(\"Settings\")\nandroid.open_app(\"Camera\")\n\n# Open by package\nandroid.open_app(\"com.android.chrome\")\nandroid.open_app(\"com.google.android.youtube\")\n</code></pre></p> <p>Supported App Names: The following common app names are recognized: - Chrome, Settings, Camera, Phone, Messages - Gmail, YouTube, Maps, Play Store - Calculator, Clock, Calendar, Contacts, Files</p>"},{"location":"api/#current_app","title":"current_app()","text":"<p>Get information about the current foreground app.</p> <pre><code>current_app() -&gt; dict\n</code></pre> <p>Returns: Dictionary with keys: - <code>package</code>: Package name (e.g., \"com.android.chrome\") - <code>activity</code>: Current activity name</p> <p>Example: <pre><code>info = android.current_app()\nprint(f\"Package: {info['package']}\")\nprint(f\"Activity: {info['activity']}\")\n</code></pre></p>"},{"location":"api/#screen-methods","title":"Screen Methods","text":""},{"location":"api/#screenshot","title":"screenshot()","text":"<p>Take a screenshot.</p> <pre><code>screenshot(filename: str = None) -&gt; str\n</code></pre> <p>Parameters: - <code>filename</code>: Output filename (default: auto-generated with timestamp)</p> <p>Returns: Absolute path to saved screenshot.</p> <p>Examples: <pre><code># Auto-named screenshot\npath = android.screenshot()\n\n# Named screenshot\npath = android.screenshot(\"login_screen.png\")\n</code></pre></p>"},{"location":"api/#screen_size","title":"screen_size()","text":"<p>Get the screen dimensions.</p> <pre><code>screen_size() -&gt; tuple[int, int]\n</code></pre> <p>Returns: Tuple of (width, height) in pixels.</p> <p>Example: <pre><code>width, height = android.screen_size()\nprint(f\"Screen: {width}x{height}\")\n</code></pre></p>"},{"location":"api/#element-methods","title":"Element Methods","text":""},{"location":"api/#find","title":"find()","text":"<p>Find an element on screen using confidence scoring.</p> <pre><code>find(\n    text: str = None,\n    *,\n    id: str = None,\n    desc: str = None,\n    timeout: float = 0,\n    min_confidence: float = None\n) -&gt; dict | None\n</code></pre> <p>Parameters: - <code>text</code>: Find by visible text (fuzzy matching supported) - <code>id</code>: Find by resource-id (partial match supported) - <code>desc</code>: Find by content-description (fuzzy matching supported) - <code>timeout</code>: Timeout in seconds (0 = single attempt) - <code>min_confidence</code>: Minimum confidence threshold (0.0-1.0), overrides instance default</p> <p>Returns: Element dictionary or <code>None</code> if no match above confidence threshold.</p> <p>Element Dictionary: <pre><code>{\n    \"class\": \"android.widget.Button\",\n    \"resource_id\": \"com.app:id/btn_login\",\n    \"text\": \"Login\",\n    \"content_desc\": \"\",\n    \"bounds\": (100, 200, 300, 250),\n    \"clickable\": True,\n    \"enabled\": True,\n    # ... more properties\n}\n</code></pre></p> <p>Examples: <pre><code># Find by text (uses default 30% threshold)\nelement = android.find(\"Login\")\n\n# Find by ID\nelement = android.find(id=\"btn_submit\")\n\n# Fuzzy matching with typo (will match \"Settings\")\nelement = android.find(\"Setings\", min_confidence=0.6)\n\n# Strict matching (require 90% confidence)\nelement = android.find(\"Submit\", min_confidence=0.9)\n</code></pre></p>"},{"location":"api/#find_with_confidence","title":"find_with_confidence()","text":"<p>Find an element with detailed confidence information.</p> <pre><code>find_with_confidence(\n    text: str = None,\n    *,\n    id: str = None,\n    desc: str = None,\n    timeout: float = 0,\n    min_confidence: float = None\n) -&gt; MatchResult | None\n</code></pre> <p>Parameters: Same as <code>find()</code></p> <p>Returns: <code>MatchResult</code> object with: - <code>element</code>: The matched element dictionary - <code>confidence</code>: Confidence score (0.0-1.0) - <code>match_details</code>: Dictionary showing score breakdown</p> <p>Examples: <pre><code>result = android.find_with_confidence(\"Login\")\nif result:\n    print(f\"Found: {result.element['text']}\")\n    print(f\"Confidence: {result.confidence:.0%}\")\n    print(f\"Details: {result.match_details}\")\n    # Output:\n    # Found: Login\n    # Confidence: 100%\n    # Details: {'text_exact': 1.0, 'clickable_bonus': 0.05}\n</code></pre></p>"},{"location":"api/#get_confidence","title":"get_confidence()","text":"<p>Get the confidence score for an element match without a minimum threshold.</p> <pre><code>get_confidence(\n    text: str = None,\n    *,\n    id: str = None,\n    desc: str = None\n) -&gt; float\n</code></pre> <p>Returns: Confidence score (0.0-1.0), or 0.0 if no match found.</p> <p>Examples: <pre><code># Check how well a search matches\nscore = android.get_confidence(\"Setings\")  # typo\nprint(f\"Confidence: {score:.0%}\")  # Output: Confidence: 78%\n\n# Use for conditional logic\nif android.get_confidence(\"Purchase\") &gt; 0.9:\n    android.tap(\"Purchase\")\nelse:\n    print(\"Purchase button not clearly visible - skipping\")\n</code></pre></p>"},{"location":"api/#find_all","title":"find_all()","text":"<p>Find all matching elements on screen.</p> <pre><code>find_all(\n    text: str = None,\n    *,\n    id: str = None,\n    desc: str = None,\n    class_name: str = None\n) -&gt; list[dict]\n</code></pre> <p>Parameters: - <code>text</code>: Find by visible text (substring match) - <code>id</code>: Find by resource-id (substring match) - <code>desc</code>: Find by content-description (substring match) - <code>class_name</code>: Find by class name (substring match)</p> <p>Returns: List of matching element dictionaries.</p> <p>Examples: <pre><code># Find all buttons\nbuttons = android.find_all(class_name=\"Button\")\n\n# Find all items containing \"Item\"\nitems = android.find_all(text=\"Item\")\n\nfor item in items:\n    print(item['text'])\n</code></pre></p>"},{"location":"api/#wait_for","title":"wait_for()","text":"<p>Wait for an element to appear.</p> <pre><code>wait_for(\n    text: str = None,\n    *,\n    id: str = None,\n    desc: str = None,\n    timeout: float = 10.0,\n    poll_interval: float = 0.5\n) -&gt; dict | None\n</code></pre> <p>Parameters: - <code>text</code>: Find by visible text - <code>id</code>: Find by resource-id - <code>desc</code>: Find by content-description - <code>timeout</code>: Maximum wait time in seconds - <code>poll_interval</code>: Time between checks in seconds</p> <p>Returns: Element dictionary if found, <code>None</code> if timeout.</p> <p>Examples: <pre><code># Wait for element\nelement = android.wait_for(\"Welcome\", timeout=15)\n\n# Wait for loading to complete\nandroid.wait_for(id=\"main_content\", timeout=30)\n</code></pre></p>"},{"location":"api/#exists","title":"exists()","text":"<p>Check if an element exists on screen.</p> <pre><code>exists(\n    text: str = None,\n    *,\n    id: str = None,\n    desc: str = None\n) -&gt; bool\n</code></pre> <p>Parameters: - <code>text</code>: Find by visible text - <code>id</code>: Find by resource-id - <code>desc</code>: Find by content-description</p> <p>Returns: <code>True</code> if element exists.</p> <p>Example: <pre><code>if android.exists(\"Error\"):\n    print(\"Error message is displayed\")\n</code></pre></p>"},{"location":"api/#device-methods","title":"Device Methods","text":""},{"location":"api/#devices","title":"devices()","text":"<p>List all connected devices.</p> <pre><code>devices() -&gt; list[dict]\n</code></pre> <p>Returns: List of dictionaries with keys: - <code>serial</code>: Device serial number - <code>status</code>: Device status (\"device\", \"offline\", \"unauthorized\")</p> <p>Example: <pre><code>for device in android.devices():\n    print(f\"{device['serial']}: {device['status']}\")\n</code></pre></p>"},{"location":"api/#info","title":"info()","text":"<p>Get device information.</p> <pre><code>info() -&gt; dict\n</code></pre> <p>Returns: Dictionary with device properties: - <code>serial</code>: Device serial number - <code>model</code>: Device model name - <code>manufacturer</code>: Device manufacturer - <code>android_version</code>: Android version - <code>sdk_version</code>: SDK API level - <code>screen_size</code>: Tuple of (width, height)</p> <p>Example: <pre><code>info = android.info()\nprint(f\"Model: {info['model']}\")\nprint(f\"Android: {info['android_version']}\")\nprint(f\"Screen: {info['screen_size'][0]}x{info['screen_size'][1]}\")\n</code></pre></p>"},{"location":"api/#automation-class","title":"Automation Class","text":"<p>The <code>Automation</code> class provides a high-level interface for running multi-step automation scripts with variables, conditions, and loops.</p>"},{"location":"api/#constructor_1","title":"Constructor","text":"<pre><code>Automation(\n    device: str = None,\n    min_confidence: float = 0.3,\n    default_timeout: float = 5.0,\n    default_retries: int = 2,\n    step_delay: float = 0.3,\n    stop_on_failure: bool = True,\n    screenshot_on_failure: bool = False,\n    initial_vars: Dict[str, Any] = None\n)\n</code></pre> <p>Parameters: - <code>device</code>: Device serial (auto-detect if None) - <code>min_confidence</code>: Default confidence for element matching - <code>default_timeout</code>: Default timeout for element search - <code>default_retries</code>: Default retry count per step - <code>step_delay</code>: Delay between steps in seconds - <code>stop_on_failure</code>: Stop on first failure - <code>screenshot_on_failure</code>: Capture screenshot on failure - <code>initial_vars</code>: Initial variables for the context</p>"},{"location":"api/#run","title":"run()","text":"<p>Execute a list of automation steps.</p> <pre><code>run(steps: List[Step], initial_vars: Dict[str, Any] = None) -&gt; AutomationResult\n</code></pre> <p>Example: <pre><code>from core.automation import Automation, Step\n\nauto = Automation(initial_vars={\"username\": \"test\"})\n\nsteps = [\n    Step(action=\"open\", app=\"MyApp\"),\n    Step(action=\"tap\", text=\"Login\"),\n    Step(action=\"type\", value=\"{{username}}\"),\n]\n\nresult = auto.run(steps)\nprint(result.summary())\n</code></pre></p>"},{"location":"api/#run_from_file","title":"run_from_file()","text":"<p>Load and run automation from a JSON file.</p> <pre><code>run_from_file(filepath: str, extra_vars: Dict[str, Any] = None) -&gt; AutomationResult\n</code></pre> <p>Example: <pre><code>auto = Automation()\nresult = auto.run_from_file(\"script.json\", extra_vars={\"password\": \"secret\"})\n</code></pre></p>"},{"location":"api/#variable-methods","title":"Variable Methods","text":"<pre><code># Set a variable\nauto.set_variable(\"count\", 5)\n\n# Get a variable\nvalue = auto.get_variable(\"count\", default=0)\n\n# Access context directly\nctx = auto.context\n</code></pre>"},{"location":"api/#supported-step-types","title":"Supported Step Types","text":"Action Description <code>tap</code> Tap element or coordinates <code>long_press</code> Long press element <code>swipe</code> Swipe gesture <code>scroll</code> Scroll gesture <code>type</code> Type text <code>press</code> Press device button <code>open</code> Open app <code>wait</code> Wait for duration <code>wait_for</code> Wait for element <code>assert_exists</code> Assert element exists <code>assert_not_exists</code> Assert element doesn't exist <code>screenshot</code> Take screenshot <code>set_variable</code> Set variable value <code>extract</code> Extract data from element <code>if</code> Conditional branching <code>for</code> For loop <code>while</code> While loop <code>until</code> Until loop <code>break</code> Break from loop <code>continue</code> Continue to next iteration <code>log</code> Log message <code>assert</code> Assert condition <p>See also: Variables and Control Flow Guide for detailed documentation.</p>"},{"location":"api/#exception-classes","title":"Exception Classes","text":"<p>Import exceptions for error handling:</p> <pre><code>from core.exceptions import (\n    DittoMationError,         # Base exception\n    DeviceNotFoundError,      # No device connected\n    DeviceOfflineError,       # Device is offline\n    ElementNotFoundError,     # Element not found\n    ADBCommandError,          # ADB command failed\n    ADBTimeoutError,          # ADB command timed out\n    # Variables &amp; Expressions\n    ExpressionError,          # Expression evaluation failed\n    UnsafeExpressionError,    # Unsafe expression blocked\n    VariableNotFoundError,    # Variable not defined\n    # Control Flow\n    LoopLimitError,           # Loop exceeded max iterations\n    ControlFlowError,         # Control flow error\n    InvalidControlFlowError,  # break/continue outside loop\n    AssertionFailedError,     # Assert condition failed\n)\n</code></pre> <p>Example: <pre><code>from core import Android\nfrom core.exceptions import DeviceNotFoundError, VariableNotFoundError\n\ntry:\n    android = Android()\nexcept DeviceNotFoundError as e:\n    print(f\"Error: {e.message}\")\n    print(f\"Hint: {e.hint}\")\n</code></pre></p>"},{"location":"api/#complete-example","title":"Complete Example","text":"<pre><code>from core import Android\nfrom core.exceptions import DeviceNotFoundError\nimport time\n\ndef automate_settings():\n    \"\"\"Example: Navigate Settings and take screenshots.\"\"\"\n\n    try:\n        android = Android()\n    except DeviceNotFoundError:\n        print(\"Please connect a device\")\n        return\n\n    # Print device info\n    info = android.info()\n    print(f\"Connected to: {info['model']} (Android {info['android_version']})\")\n\n    # Open Settings\n    android.open_app(\"Settings\")\n    time.sleep(2)\n\n    # Take initial screenshot\n    android.screenshot(\"settings_home.png\")\n\n    # Look for Network settings\n    if android.wait_for(\"Network\", timeout=5):\n        android.tap(\"Network\")\n        time.sleep(1)\n        android.screenshot(\"settings_network.png\")\n\n    # Go back\n    android.press_back()\n\n    # Scroll and find Display\n    for _ in range(3):\n        if android.exists(\"Display\"):\n            android.tap(\"Display\")\n            break\n        android.scroll(\"down\")\n\n    # Return home\n    android.press_home()\n    print(\"Automation complete!\")\n\nif __name__ == \"__main__\":\n    automate_settings()\n</code></pre>"},{"location":"approach/","title":"DittoMation Technical Approach","text":"<p>This document describes the technical architecture and approach used in DittoMation for Android UI automation.</p>"},{"location":"approach/#overview","title":"Overview","text":"<p>DittoMation uses a record-replay paradigm combined with semantic understanding to create robust, maintainable Android automation. Unlike coordinate-based automation that breaks with UI changes, DittoMation captures the meaning of interactions and can adapt to UI variations.</p>"},{"location":"approach/#architecture","title":"Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        User Interface                            \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502  Recording  \u2502  \u2502   Replay    \u2502  \u2502  Natural Language CLI   \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n          \u2502                \u2502                      \u2502\n          \u25bc                \u25bc                      \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      Core Components                             \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502   Gesture   \u2502  \u2502   Element   \u2502  \u2502    Workflow Engine      \u2502  \u2502\n\u2502  \u2502 Classifier  \u2502  \u2502   Matcher   \u2502  \u2502  (parse \u2192 execute)      \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n          \u2502                \u2502                      \u2502\n          \u25bc                \u25bc                      \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      ADB Layer                                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u2502\n\u2502  \u2502  getevent   \u2502  \u2502 uiautomator \u2502  \u2502     input commands      \u2502  \u2502\n\u2502  \u2502  (capture)  \u2502  \u2502   (dump)    \u2502  \u2502   (tap/swipe/text)      \u2502  \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n          \u2502                \u2502                      \u2502\n          \u25bc                \u25bc                      \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                      Android Device                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"approach/#key-components","title":"Key Components","text":""},{"location":"approach/#1-adb-wrapper-recorderadb_wrapperpy","title":"1. ADB Wrapper (<code>recorder/adb_wrapper.py</code>)","text":"<p>Provides a Python interface to Android Debug Bridge (ADB) commands:</p> <ul> <li>Device Detection: Auto-discovers ADB path and connected devices</li> <li>Screen Info: Gets screen dimensions for coordinate mapping</li> <li>UI Dump: Captures UI hierarchy via <code>uiautomator dump</code></li> <li>Shell Streaming: Streams <code>getevent</code> output for touch capture</li> </ul> <pre><code># Example: Capture UI hierarchy\nroot = dump_ui()  # Returns XML ElementTree\n\n# Example: Execute ADB command\noutput = run_adb(['shell', 'input', 'tap', '540', '1200'])\n</code></pre>"},{"location":"approach/#2-touch-event-capture-recorderevent_listenerpy","title":"2. Touch Event Capture (<code>recorder/event_listener.py</code>)","text":"<p>Captures raw touch events from the Linux kernel input subsystem:</p> <pre><code>/dev/input/eventX \u2192 getevent \u2192 TouchEventListener \u2192 Gesture Events\n</code></pre> <p>Event Types Captured: - <code>EV_ABS</code> (0x03): Absolute position events   - <code>ABS_MT_POSITION_X</code> (0x35): X coordinate   - <code>ABS_MT_POSITION_Y</code> (0x36): Y coordinate   - <code>ABS_MT_TRACKING_ID</code> (0x39): Finger tracking - <code>EV_SYN</code> (0x00): Synchronization events</p> <p>Coordinate Mapping: Raw input coordinates are scaled to screen coordinates: <pre><code>screen_x = (raw_x / max_x) * screen_width\nscreen_y = (raw_y / max_y) * screen_height\n</code></pre></p>"},{"location":"approach/#3-ui-hierarchy-parsing-recorderui_dumperpy","title":"3. UI Hierarchy Parsing (<code>recorder/ui_dumper.py</code>)","text":"<p>Captures and parses the Android view hierarchy:</p> <pre><code>&lt;!-- uiautomator dump output --&gt;\n&lt;node class=\"android.widget.Button\"\n      resource-id=\"com.app:id/login\"\n      content-desc=\"Login button\"\n      text=\"Login\"\n      bounds=\"[100,200][300,250]\"\n      clickable=\"true\" /&gt;\n</code></pre> <p>Parsed Element Structure: <pre><code>{\n    \"class\": \"android.widget.Button\",\n    \"resource_id\": \"com.app:id/login\",\n    \"content_desc\": \"Login button\",\n    \"text\": \"Login\",\n    \"bounds\": (100, 200, 300, 250),\n    \"clickable\": True,\n    \"xpath\": \"//android.widget.Button[@text='Login']\"\n}\n</code></pre></p>"},{"location":"approach/#4-element-matching-recorderelement_matcherpy","title":"4. Element Matching (<code>recorder/element_matcher.py</code>)","text":"<p>Maps touch coordinates to UI elements using spatial containment:</p> <pre><code>Touch at (150, 225) \u2192 Find elements containing point \u2192 Select best match\n</code></pre> <p>Selection Criteria: 1. Element must contain the touch point 2. Prefer smaller elements (more specific) 3. Prefer clickable elements 4. Break ties using element depth in hierarchy</p>"},{"location":"approach/#5-gesture-classification-recordergesture_classifierpy","title":"5. Gesture Classification (<code>recorder/gesture_classifier.py</code>)","text":"<p>Classifies touch sequences into semantic gestures:</p> Gesture Duration Movement Criteria Tap &lt; 500ms &lt; 50px Short, stationary Long Press \u2265 500ms &lt; 50px Long, stationary Swipe Any \u2265 50px Directional movement Scroll Any \u2265 50px Within scrollable container Pinch Any Multi-touch Distance change between fingers"},{"location":"approach/#6-smart-locator-replayerlocatorpy","title":"6. Smart Locator (<code>replayer/locator.py</code>)","text":"<p>Finds elements during replay using a fallback chain:</p> <pre><code>1. resource-id  (most stable)\n       \u2193 not found\n2. content-desc (accessibility label)\n       \u2193 not found\n3. text         (visible text)\n       \u2193 not found\n4. xpath        (structural path)\n       \u2193 not found\n5. coordinates  (last resort)\n</code></pre> <p>Why This Order? - <code>resource-id</code>: Developer-assigned, stable across sessions - <code>content-desc</code>: Accessibility label, often stable - <code>text</code>: User-visible, may change with language/state - <code>xpath</code>: Structural, breaks with layout changes - <code>coordinates</code>: Absolute, breaks with any UI change</p>"},{"location":"approach/#7-gesture-executor-replayerexecutorpy","title":"7. Gesture Executor (<code>replayer/executor.py</code>)","text":"<p>Executes gestures via ADB input commands:</p> <pre><code># Tap\nadb shell input tap X Y\n\n# Long press (swipe with same start/end)\nadb shell input swipe X Y X Y DURATION_MS\n\n# Swipe\nadb shell input swipe X1 Y1 X2 Y2 DURATION_MS\n\n# Text input (chunked for reliability)\nadb shell input text \"chunk1\"\nadb shell input text \"chunk2\"\n</code></pre>"},{"location":"approach/#8-natural-language-parser-replayernl_runnerpy","title":"8. Natural Language Parser (<code>replayer/nl_runner.py</code>)","text":"<p>Converts natural language to executable actions:</p> <pre><code>\"Open YouTube and search for cats\"\n        \u2193\n    Tokenize &amp; Split\n        \u2193\n[\"open youtube\", \"search for cats\"]\n        \u2193\n    Pattern Matching\n        \u2193\n[(_action_tap, \"youtube\"), (_action_search, \"cats\")]\n        \u2193\n    Execute Actions\n</code></pre> <p>Pattern Examples: <pre><code>patterns = [\n    (r'\\bopen\\s+(.+)', _action_tap),\n    (r'\\bsearch\\s+for\\s+\"?(.+)\"?', _action_search),\n    (r'\\bswipe\\s+(up|down|left|right)', _action_swipe),\n    (r'\\bwait\\s+(\\d+)', _action_wait),\n]\n</code></pre></p>"},{"location":"approach/#workflow-format","title":"Workflow Format","text":"<p>Recorded workflows are stored as JSON:</p> <pre><code>{\n    \"metadata\": {\n        \"app_package\": \"com.example.app\",\n        \"device\": \"emulator-5554\",\n        \"screen_size\": [1080, 2340],\n        \"recorded_at\": \"2026-01-18T10:30:00Z\"\n    },\n    \"steps\": [\n        {\n            \"step_id\": 1,\n            \"action\": \"tap\",\n            \"locator\": {\n                \"primary\": {\"strategy\": \"id\", \"value\": \"com.app:id/login\"},\n                \"fallbacks\": [\n                    {\"strategy\": \"text\", \"value\": \"Login\"},\n                    {\"strategy\": \"xpath\", \"value\": \"//Button[@text='Login']\"}\n                ]\n            },\n            \"gesture\": {\n                \"type\": \"tap\",\n                \"start\": [540, 1200],\n                \"duration_ms\": 120\n            }\n        }\n    ]\n}\n</code></pre>"},{"location":"approach/#intent-based-app-launching","title":"Intent-Based App Launching","text":"<p>For reliable app launching, DittoMation uses Android intents:</p> <pre><code>app_intents = {\n    'clock': 'android.intent.action.SHOW_ALARMS',\n    'settings': 'android.settings.SETTINGS',\n    'camera': 'android.media.action.IMAGE_CAPTURE',\n    'phone': 'android.intent.action.DIAL',\n    # ...\n}\n\n# Launch via ADB\nadb shell am start -a android.intent.action.SHOW_ALARMS\n</code></pre> <p>Benefits: - Works regardless of home screen layout - No need to find app icon - Faster and more reliable</p>"},{"location":"approach/#clipboardstate-management","title":"Clipboard/State Management","text":"<p>The natural language runner maintains state across commands:</p> <pre><code># Copy operation stores value\n\"copy last number I called\"  \u2192  self.clipboard = \"1234567890\"\n\n# Later command references it\n\"search for that number you copied\"  \u2192  search(self.clipboard)\n</code></pre> <p>Supported References: - <code>that number you copied</code> - <code>the copied text</code> - <code>what you copied</code> - <code>the clipboard</code> - <code>it</code> (in search context)</p>"},{"location":"approach/#error-handling-retry-logic","title":"Error Handling &amp; Retry Logic","text":""},{"location":"approach/#ui-dump-retries","title":"UI Dump Retries","text":"<pre><code>for attempt in range(max_retries):\n    try:\n        dump_ui()\n    except TimeoutError:\n        kill_uiautomator()  # Kill stuck process\n        time.sleep(retry_delay)\n        continue\n</code></pre>"},{"location":"approach/#text-input-chunking","title":"Text Input Chunking","text":"<p>Long text is typed in chunks to prevent dropped characters: <pre><code>for chunk in split_into_chunks(text, size=10):\n    adb_input_text(chunk)\n    time.sleep(0.15)  # Delay between chunks\n</code></pre></p>"},{"location":"approach/#limitations","title":"Limitations","text":"<ol> <li> <p>Emulator Touch Capture: Emulator touch events bypass <code>getevent</code>. Use interactive recording instead.</p> </li> <li> <p>Dynamic Content: Elements that change frequently (timers, animations) may be hard to locate.</p> </li> <li> <p>Complex Gestures: Multi-finger gestures beyond pinch are not fully supported.</p> </li> <li> <p>Root Access: Some advanced features may require rooted devices.</p> </li> </ol>"},{"location":"cli/","title":"DittoMation CLI Reference","text":"<p>Complete reference for the <code>ditto</code> command-line interface.</p>"},{"location":"cli/#installation","title":"Installation","text":"<pre><code># Install from source\npip install -e .\n\n# Or install click directly\npip install click\n</code></pre>"},{"location":"cli/#usage","title":"Usage","text":"<pre><code>ditto [OPTIONS] COMMAND [ARGS]...\n</code></pre>"},{"location":"cli/#global-options","title":"Global Options","text":"Option Description <code>--version</code> Show version and exit <code>--help</code> Show help message and exit"},{"location":"cli/#getting-help","title":"Getting Help","text":"<pre><code># General help\nditto --help\n\n# Command-specific help\nditto tap --help\nditto swipe --help\n</code></pre>"},{"location":"cli/#confidence-scoring","title":"Confidence Scoring","text":"<p>DittoMation uses confidence scoring for element matching. Instead of exact matching, elements are scored based on how well they match your search criteria.</p> <ul> <li>Default minimum confidence: 30%</li> <li>Use <code>-c</code> or <code>--min-confidence</code> to adjust threshold</li> <li>Use <code>--show-confidence</code> to see scores</li> </ul> <p>See Confidence Scoring Guide for details.</p>"},{"location":"cli/#gesture-commands","title":"Gesture Commands","text":""},{"location":"cli/#tap","title":"tap","text":"<p>Tap at coordinates or on an element with confidence scoring.</p> <pre><code>ditto tap [X] [Y] [OPTIONS]\n</code></pre> <p>Arguments: | Argument | Description | |----------|-------------| | <code>X</code> | X coordinate (optional if using element options) | | <code>Y</code> | Y coordinate (optional if using element options) |</p> <p>Options: | Option | Short | Description | |--------|-------|-------------| | <code>--text</code> | <code>-t</code> | Tap element by visible text | | <code>--id</code> | <code>-i</code> | Tap element by resource-id | | <code>--desc</code> | <code>-d</code> | Tap element by content-description | | <code>--timeout</code> | | Element search timeout in seconds (default: 5) | | <code>--min-confidence</code> | <code>-c</code> | Minimum confidence threshold 0.0-1.0 (default: 0.3) |</p> <p>Examples: <pre><code># Tap at coordinates\nditto tap 500 500\n\n# Tap element by text\nditto tap --text \"Login\"\nditto tap -t \"Login\"\n\n# Tap element by resource-id\nditto tap --id btn_submit\nditto tap -i com.app:id/btn_submit\n\n# Tap element by content-description\nditto tap --desc \"Submit button\"\n\n# With custom timeout\nditto tap -t \"Loading...\" --timeout 15\n\n# Fuzzy matching with lower confidence (will match \"Settings\" even with typo)\nditto tap -t \"Setings\" -c 0.5\n\n# Strict matching (require 90% confidence)\nditto tap -t \"Submit\" -c 0.9\n</code></pre></p> <p>Output with Confidence: <pre><code>Tapped element: Login (95% confidence)\n</code></pre></p>"},{"location":"cli/#long-press","title":"long-press","text":"<p>Long press at coordinates or on an element.</p> <pre><code>ditto long-press [X] [Y] [OPTIONS]\n</code></pre> <p>Arguments: | Argument | Description | |----------|-------------| | <code>X</code> | X coordinate | | <code>Y</code> | Y coordinate |</p> <p>Options: | Option | Short | Description | |--------|-------|-------------| | <code>--text</code> | <code>-t</code> | Element text | | <code>--id</code> | <code>-i</code> | Element resource-id | | <code>--desc</code> | <code>-d</code> | Element content-description | | <code>--duration</code> | | Press duration in ms (default: 1000) | | <code>--timeout</code> | | Element search timeout (default: 5) |</p> <p>Examples: <pre><code># Long press at coordinates\nditto long-press 500 500\n\n# Long press for 2 seconds\nditto long-press 500 500 --duration 2000\n\n# Long press element\nditto long-press -t \"Item to select\"\n</code></pre></p>"},{"location":"cli/#swipe","title":"swipe","text":"<p>Swipe by direction or coordinates.</p> <pre><code>ditto swipe DIRECTION_OR_X1 [Y1] [X2] [Y2] [OPTIONS]\n</code></pre> <p>Arguments: | Argument | Description | |----------|-------------| | <code>DIRECTION_OR_X1</code> | Direction (up/down/left/right) or start X | | <code>Y1</code> | Start Y coordinate (for coordinate swipe) | | <code>X2</code> | End X coordinate (for coordinate swipe) | | <code>Y2</code> | End Y coordinate (for coordinate swipe) |</p> <p>Options: | Option | Description | |--------|-------------| | <code>--duration</code> | Swipe duration in ms (default: 300) |</p> <p>Examples: <pre><code># Swipe by direction\nditto swipe up\nditto swipe down\nditto swipe left\nditto swipe right\n\n# Swipe by coordinates\nditto swipe 500 1500 500 500\n\n# Slow swipe\nditto swipe up --duration 1000\n</code></pre></p>"},{"location":"cli/#scroll","title":"scroll","text":"<p>Scroll in a direction.</p> <pre><code>ditto scroll DIRECTION [OPTIONS]\n</code></pre> <p>Arguments: | Argument | Values | Description | |----------|--------|-------------| | <code>DIRECTION</code> | up, down, left, right | Scroll direction |</p> <p>Options: | Option | Description | |--------|-------------| | <code>--distance</code> | Scroll distance 0.0-1.0 (default: 0.5) | | <code>--duration</code> | Scroll duration in ms (default: 500) |</p> <p>Examples: <pre><code># Basic scroll\nditto scroll down\nditto scroll up\n\n# Long scroll\nditto scroll down --distance 0.8\n\n# Slow scroll\nditto scroll down --duration 1000\n</code></pre></p>"},{"location":"cli/#pinch","title":"pinch","text":"<p>Pinch gesture for zooming.</p> <pre><code>ditto pinch [OPTIONS]\n</code></pre> <p>Options: | Option | Description | |--------|-------------| | <code>--scale</code> | Scale factor: &gt;1 zoom in, &lt;1 zoom out (default: 0.5) | | <code>--x</code> | Center X coordinate (default: screen center) | | <code>--y</code> | Center Y coordinate (default: screen center) | | <code>--duration</code> | Gesture duration in ms (default: 500) |</p> <p>Examples: <pre><code># Zoom in\nditto pinch --scale 2.0\n\n# Zoom out\nditto pinch --scale 0.5\n\n# Pinch at specific location\nditto pinch --scale 1.5 --x 300 --y 400\n</code></pre></p>"},{"location":"cli/#input-commands","title":"Input Commands","text":""},{"location":"cli/#type","title":"type","text":"<p>Type text into the focused field.</p> <pre><code>ditto type TEXT [OPTIONS]\n</code></pre> <p>Arguments: | Argument | Description | |----------|-------------| | <code>TEXT</code> | Text to type |</p> <p>Options: | Option | Description | |--------|-------------| | <code>--clear</code> | Clear field before typing |</p> <p>Examples: <pre><code># Type text\nditto type \"Hello World\"\n\n# Clear and type\nditto type \"new text\" --clear\n</code></pre></p>"},{"location":"cli/#press","title":"press","text":"<p>Press a device button.</p> <pre><code>ditto press BUTTON\n</code></pre> <p>Arguments: | Argument | Values | |----------|--------| | <code>BUTTON</code> | home, back, enter, menu, recent, search, volume-up, volume-down |</p> <p>Examples: <pre><code>ditto press home\nditto press back\nditto press enter\nditto press menu\nditto press volume-up\n</code></pre></p>"},{"location":"cli/#key","title":"key","text":"<p>Press any key by keycode.</p> <pre><code>ditto key KEYCODE\n</code></pre> <p>Arguments: | Argument | Description | |----------|-------------| | <code>KEYCODE</code> | Android keycode (e.g., KEYCODE_VOLUME_UP) |</p> <p>Common Keycodes: - <code>KEYCODE_HOME</code> - Home button - <code>KEYCODE_BACK</code> - Back button - <code>KEYCODE_MENU</code> - Menu button - <code>KEYCODE_ENTER</code> - Enter key - <code>KEYCODE_DEL</code> - Backspace - <code>KEYCODE_POWER</code> - Power button - <code>KEYCODE_VOLUME_UP</code> - Volume up - <code>KEYCODE_VOLUME_DOWN</code> - Volume down - <code>KEYCODE_CAMERA</code> - Camera button</p> <p>Examples: <pre><code>ditto key KEYCODE_VOLUME_UP\nditto key KEYCODE_POWER\nditto key KEYCODE_CAMERA\n</code></pre></p>"},{"location":"cli/#app-commands","title":"App Commands","text":""},{"location":"cli/#open","title":"open","text":"<p>Open an app by name or package.</p> <pre><code>ditto open APP_NAME\n</code></pre> <p>Arguments: | Argument | Description | |----------|-------------| | <code>APP_NAME</code> | App name or package name |</p> <p>Supported App Names: - Chrome, Settings, Camera, Phone, Messages - Gmail, YouTube, Maps, Play Store - Calculator, Clock, Calendar, Contacts, Files</p> <p>Examples: <pre><code># Open by name\nditto open Chrome\nditto open Settings\nditto open \"Play Store\"\n\n# Open by package\nditto open com.android.chrome\nditto open com.google.android.youtube\n</code></pre></p>"},{"location":"cli/#app","title":"app","text":"<p>Show current foreground app information.</p> <pre><code>ditto app\n</code></pre> <p>Output: <pre><code>Package:  com.android.chrome\nActivity: org.chromium.chrome.browser.ChromeTabbedActivity\n</code></pre></p>"},{"location":"cli/#screen-commands","title":"Screen Commands","text":""},{"location":"cli/#screenshot","title":"screenshot","text":"<p>Take a screenshot.</p> <pre><code>ditto screenshot [FILENAME]\n</code></pre> <p>Arguments: | Argument | Description | |----------|-------------| | <code>FILENAME</code> | Output filename (optional, auto-generated if omitted) |</p> <p>Examples: <pre><code># Auto-named screenshot\nditto screenshot\n\n# Named screenshot\nditto screenshot login.png\nditto screenshot screens/home.png\n</code></pre></p>"},{"location":"cli/#screen-size","title":"screen-size","text":"<p>Show screen dimensions.</p> <pre><code>ditto screen-size\n</code></pre> <p>Output: <pre><code>1080 x 2340\n</code></pre></p>"},{"location":"cli/#element-commands","title":"Element Commands","text":""},{"location":"cli/#find","title":"find","text":"<p>Find elements on screen with confidence scoring.</p> <pre><code>ditto find [OPTIONS]\n</code></pre> <p>Options: | Option | Short | Description | |--------|-------|-------------| | <code>--text</code> | <code>-t</code> | Find by visible text | | <code>--id</code> | <code>-i</code> | Find by resource-id | | <code>--desc</code> | <code>-d</code> | Find by content-description | | <code>--class</code> | | Find by class name | | <code>--all</code> | | Find all matching elements | | <code>--json</code> | | Output as JSON | | <code>--min-confidence</code> | <code>-c</code> | Minimum confidence threshold 0.0-1.0 (default: 0.3) | | <code>--show-confidence</code> | | Show confidence scores in output |</p> <p>Examples: <pre><code># Find single element by text\nditto find -t \"Login\"\n\n# Find by resource-id\nditto find --id btn_submit\n\n# Find all matching elements\nditto find -t \"Item\" --all\n\n# Find with confidence display\nditto find -t \"Login\" --show-confidence\n\n# Fuzzy matching (find \"Settings\" with typo)\nditto find -t \"Setings\" -c 0.5\n\n# Find all with scores\nditto find -t \"Save\" --all --show-confidence\n\n# Output as JSON (includes confidence)\nditto find -t \"Login\" --json\n</code></pre></p> <p>Sample Output: <pre><code>  Button id=btn_login text=\"Login\" @(540,1200) [95% excellent]\n</code></pre></p> <p>JSON Output: <pre><code>{\n  \"element\": {\n    \"class\": \"android.widget.Button\",\n    \"text\": \"Login\",\n    ...\n  },\n  \"confidence\": 0.95,\n  \"match_details\": {\n    \"text_exact_ci\": 0.95,\n    \"clickable_bonus\": 0.05\n  }\n}\n</code></pre></p>"},{"location":"cli/#confidence","title":"confidence","text":"<p>Get confidence score for an element match.</p> <pre><code>ditto confidence [OPTIONS]\n</code></pre> <p>Options: | Option | Short | Description | |--------|-------|-------------| | <code>--text</code> | <code>-t</code> | Check element by text | | <code>--id</code> | <code>-i</code> | Check element by resource-id | | <code>--desc</code> | <code>-d</code> | Check element by content-description |</p> <p>Examples: <pre><code># Check confidence for exact text\nditto confidence -t \"Login\"\n# Output: Confidence for 'Login': 100% (excellent)\n\n# Check confidence for typo\nditto confidence -t \"Logn\"\n# Output: Confidence for 'Logn': 72% (good)\n\n# Check ID confidence\nditto confidence -i btn_submit\n</code></pre></p> <p>This is useful for: - Debugging why elements aren't found - Testing if fuzzy matching will work - Verifying element presence before critical actions</p>"},{"location":"cli/#wait","title":"wait","text":"<p>Wait for an element to appear.</p> <pre><code>ditto wait [OPTIONS]\n</code></pre> <p>Options: | Option | Short | Description | |--------|-------|-------------| | <code>--text</code> | <code>-t</code> | Wait for element by text | | <code>--id</code> | <code>-i</code> | Wait for element by resource-id | | <code>--desc</code> | <code>-d</code> | Wait for element by content-description | | <code>--timeout</code> | | Timeout in seconds (default: 10) |</p> <p>Examples: <pre><code># Wait for text\nditto wait -t \"Welcome\"\n\n# Wait with timeout\nditto wait -t \"Loading complete\" --timeout 30\n\n# Wait for element by ID\nditto wait --id main_content --timeout 15\n</code></pre></p>"},{"location":"cli/#device-commands","title":"Device Commands","text":""},{"location":"cli/#devices","title":"devices","text":"<p>List connected devices.</p> <pre><code>ditto devices\n</code></pre> <p>Output: <pre><code>Connected devices (2):\n  + emulator-5554 (device)\n  + 192.168.1.100:5555 (device)\n</code></pre></p>"},{"location":"cli/#info","title":"info","text":"<p>Show device information.</p> <pre><code>ditto info\n</code></pre> <p>Output: <pre><code>Device Information:\n  Serial:          emulator-5554\n  Model:           Pixel 4\n  Manufacturer:    Google\n  Android Version: 12\n  SDK Version:     31\n  Screen Size:     1080 x 2340\n</code></pre></p>"},{"location":"cli/#exit-codes","title":"Exit Codes","text":"Code Description <code>0</code> Success <code>1</code> Error (element not found, command failed, etc.)"},{"location":"cli/#scripting-examples","title":"Scripting Examples","text":""},{"location":"cli/#shell-script","title":"Shell Script","text":"<pre><code>#!/bin/bash\n# Open app and navigate\n\nditto open Settings\nsleep 2\n\nditto tap -t \"Network\"\nsleep 1\n\nditto tap -t \"Wi-Fi\"\nsleep 1\n\nditto screenshot wifi_settings.png\n\nditto press back\nditto press back\nditto press home\n</code></pre>"},{"location":"cli/#loop-until-element-found","title":"Loop Until Element Found","text":"<pre><code>#!/bin/bash\n# Scroll until element is found\n\nfor i in {1..10}; do\n    if ditto find -t \"Target Item\" 2&gt;/dev/null; then\n        ditto tap -t \"Target Item\"\n        exit 0\n    fi\n    ditto scroll down\n    sleep 0.5\ndone\n\necho \"Element not found\"\nexit 1\n</code></pre>"},{"location":"cli/#batch-screenshots","title":"Batch Screenshots","text":"<pre><code>#!/bin/bash\n# Take multiple screenshots\n\nfor i in {1..5}; do\n    ditto screenshot \"screen_$i.png\"\n    ditto swipe left\n    sleep 1\ndone\n</code></pre>"},{"location":"cli/#error-handling","title":"Error Handling","text":"<pre><code>#!/bin/bash\n# With error handling\n\nif ! ditto devices | grep -q \"device\"; then\n    echo \"No device connected\"\n    exit 1\nfi\n\nif ditto tap -t \"Login\" --timeout 5; then\n    echo \"Tapped Login button\"\nelse\n    echo \"Login button not found\"\n    exit 1\nfi\n</code></pre>"},{"location":"cli/#environment-variables","title":"Environment Variables","text":"Variable Description <code>ANDROID_HOME</code> Path to Android SDK (for ADB detection) <code>ANDROID_SDK_ROOT</code> Alternative to ANDROID_HOME"},{"location":"cli/#troubleshooting","title":"Troubleshooting","text":""},{"location":"cli/#device-not-found","title":"Device Not Found","text":"<pre><code># Check ADB sees the device\nadb devices\n\n# Restart ADB server\nadb kill-server\nadb start-server\n</code></pre>"},{"location":"cli/#element-not-found","title":"Element Not Found","text":"<pre><code># Increase timeout\nditto tap -t \"Login\" --timeout 15\n\n# Check element exists\nditto find -t \"Login\"\n\n# List all elements (for debugging)\nditto find --class \"\" --all --json &gt; elements.json\n</code></pre>"},{"location":"cli/#permission-denied","title":"Permission Denied","text":"<p>Ensure USB debugging is enabled and the computer is authorized on the device.</p>"},{"location":"cli/#automation-commands","title":"Automation Commands","text":""},{"location":"cli/#run","title":"run","text":"<p>Run an automation script from a JSON file with support for variables, conditions, and loops.</p> <pre><code>ditto run SCRIPT_FILE [OPTIONS]\n</code></pre> <p>Arguments: | Argument | Description | |----------|-------------| | <code>SCRIPT_FILE</code> | Path to JSON script file |</p> <p>Options: | Option | Short | Description | |--------|-------|-------------| | <code>--retries</code> | <code>-r</code> | Default retry count per step (default: 2) | | <code>--timeout</code> | <code>-t</code> | Default timeout in seconds (default: 5.0) | | <code>--delay</code> | <code>-d</code> | Delay between steps in seconds (default: 0.3) | | <code>--stop-on-failure</code> | | Stop on first failure (default) | | <code>--continue-on-failure</code> | | Continue on failure | | <code>--screenshot-on-failure</code> | | Take screenshot when a step fails | | <code>--output</code> | <code>-o</code> | Save result to JSON file | | <code>--verbose</code> | <code>-v</code> | Show detailed step output | | <code>--var</code> | <code>-V</code> | Set variable: <code>--var name=value</code> (can be used multiple times) | | <code>--vars-file</code> | | Load variables from JSON or YAML file |</p> <p>Examples: <pre><code># Basic script execution\nditto run my_script.json\n\n# With retries and verbose output\nditto run my_script.json --retries 3 --verbose\n\n# With variables from command line\nditto run login.json --var username=testuser --var password=secret\n\n# With variables from file\nditto run script.json --vars-file config.json\n\n# Combine CLI vars and file (CLI overrides file)\nditto run script.json --vars-file defaults.json --var username=override\n\n# Save results\nditto run my_script.json -o result.json --verbose\n</code></pre></p> <p>Script Format with Variables: <pre><code>{\n  \"name\": \"login_test\",\n  \"variables\": {\n    \"username\": \"default_user\",\n    \"timeout\": 10\n  },\n  \"steps\": [\n    {\"action\": \"open\", \"app\": \"MyApp\"},\n    {\"action\": \"tap\", \"text\": \"Login\"},\n    {\"action\": \"type\", \"value\": \"{{username}}\"},\n    {\"action\": \"tap\", \"text\": \"Submit\"}\n  ]\n}\n</code></pre></p> <p>See: Variables and Control Flow Guide for complete documentation.</p>"},{"location":"cli/#create-script","title":"create-script","text":"<p>Create a new automation script from a template.</p> <pre><code>ditto create-script NAME [OPTIONS]\n</code></pre> <p>Arguments: | Argument | Description | |----------|-------------| | <code>NAME</code> | Script filename (<code>.json</code> added if not present) |</p> <p>Options: | Option | Short | Description | |--------|-------|-------------| | <code>--template</code> | <code>-t</code> | Template to use: <code>empty</code>, <code>alarm</code>, <code>app</code> (default: empty) |</p> <p>Examples: <pre><code># Create empty script\nditto create-script my_automation\n\n# Create from alarm template\nditto create-script set_alarm --template alarm\n\n# Create from app template\nditto create-script app_test -t app\n</code></pre></p>"},{"location":"cli/#validate","title":"validate","text":"<p>Validate an automation script without running it.</p> <pre><code>ditto validate SCRIPT_FILE\n</code></pre> <p>Examples: <pre><code>ditto validate my_script.json\n</code></pre></p> <p>Output: <pre><code>Script is valid: 7 steps\n</code></pre></p> <p>Or if there are errors: <pre><code>Validation failed with 2 error(s):\n  - Step 1: Invalid action 'tapp'\n  - Step 3: on_failure must be 'stop', 'continue', or 'retry'\n</code></pre></p>"},{"location":"confidence-scoring/","title":"Confidence Scoring System","text":"<p>DittoMation uses a confidence scoring system for element matching, enabling fuzzy matching and more robust automation that works even when UI text has minor variations.</p>"},{"location":"confidence-scoring/#overview","title":"Overview","text":"<p>Instead of binary matching (found/not found), DittoMation calculates a confidence score (0.0 to 1.0) for each potential match. This allows:</p> <ul> <li>Fuzzy matching: Find \"Settings\" even if you search for \"Setings\" (typo)</li> <li>Partial matching: Find elements containing your search term</li> <li>Ranked results: Get multiple matches sorted by relevance</li> <li>Configurable thresholds: Control how strict matching should be</li> </ul>"},{"location":"confidence-scoring/#confidence-levels","title":"Confidence Levels","text":"Score Level Description 90-100% Excellent Exact or near-exact match 70-89% Good Strong match with minor differences 50-69% Fair Partial match or contains search term 30-49% Low Weak match, may need verification 0-29% Very Low Poor match, likely incorrect"},{"location":"confidence-scoring/#scoring-factors","title":"Scoring Factors","text":""},{"location":"confidence-scoring/#text-matching","title":"Text Matching","text":"Match Type Score Exact match (case-sensitive) 100% Exact match (case-insensitive) 95% Search text is substring 70-90% (based on length ratio) Element text is substring 60-80% Fuzzy/similar text 40-70% (based on similarity)"},{"location":"confidence-scoring/#resource-id-matching","title":"Resource ID Matching","text":"Match Type Score Exact full ID match 100% Exact ID part match (after <code>/</code>) 95% ID contains search term 80% Partial/suffix match 70% Fuzzy match 50-60%"},{"location":"confidence-scoring/#content-description-matching","title":"Content Description Matching","text":"Match Type Score Exact match 100% Case-insensitive exact 95% Contains search term 70-80% Partial match 60-70% Fuzzy match 40-70%"},{"location":"confidence-scoring/#bonus-factors","title":"Bonus Factors","text":"<ul> <li>Clickable element: +5% bonus</li> <li>Enabled element: +5% bonus</li> </ul>"},{"location":"confidence-scoring/#python-api-usage","title":"Python API Usage","text":""},{"location":"confidence-scoring/#basic-usage-with-confidence","title":"Basic Usage with Confidence","text":"<pre><code>from core import Android\n\nandroid = Android()\n\n# Find with default threshold (30%)\nelement = android.find(\"Login\")\n\n# Find with custom threshold (require 70% confidence)\nelement = android.find(\"Login\", min_confidence=0.7)\n\n# Get detailed confidence information\nresult = android.find_with_confidence(\"Login\")\nif result:\n    print(f\"Element: {result.element['text']}\")\n    print(f\"Confidence: {result.confidence:.0%}\")\n    print(f\"Match details: {result.match_details}\")\n</code></pre>"},{"location":"confidence-scoring/#setting-global-threshold","title":"Setting Global Threshold","text":"<pre><code># Set threshold at initialization\nandroid = Android(min_confidence=0.5)\n\n# Or change it later\nandroid.min_confidence = 0.7\n</code></pre>"},{"location":"confidence-scoring/#finding-all-matches-with-scores","title":"Finding All Matches with Scores","text":"<pre><code># Get all matches above threshold\nresults = android.find_all_with_confidence(\"Item\", min_confidence=0.3)\n\nfor r in results:\n    print(f\"{r.element['text']}: {r.confidence:.0%}\")\n\n# Example output:\n# Item 1: 95%\n# Item 2: 95%\n# My Items: 72%\n# Itemized: 65%\n</code></pre>"},{"location":"confidence-scoring/#checking-confidence-score","title":"Checking Confidence Score","text":"<pre><code># Get confidence without minimum threshold\nscore = android.get_confidence(\"Setings\")  # typo\nprint(f\"Confidence: {score:.0%}\")\n# Output: Confidence: 78%\n\n# Use for conditional logic\nif android.get_confidence(\"Login\") &gt; 0.8:\n    android.tap(\"Login\")\nelse:\n    print(\"Login button not clearly visible\")\n</code></pre>"},{"location":"confidence-scoring/#waiting-with-confidence","title":"Waiting with Confidence","text":"<pre><code># Wait for element with high confidence\nresult = android.wait_for_with_confidence(\n    \"Welcome\",\n    timeout=10,\n    min_confidence=0.8\n)\n\nif result:\n    print(f\"Found with {result.confidence:.0%} confidence\")\n</code></pre>"},{"location":"confidence-scoring/#cli-usage","title":"CLI Usage","text":""},{"location":"confidence-scoring/#finding-elements","title":"Finding Elements","text":"<pre><code># Find with default threshold\nditto find -t \"Login\"\n\n# Find with custom threshold\nditto find -t \"Login\" -c 0.7\n\n# Show confidence score\nditto find -t \"Login\" --show-confidence\n\n# Find all matches\nditto find -t \"Item\" --all --show-confidence\n</code></pre>"},{"location":"confidence-scoring/#tapping-with-confidence","title":"Tapping with Confidence","text":"<pre><code># Tap with default threshold\nditto tap -t \"Submit\"\n\n# Tap with higher confidence requirement\nditto tap -t \"Submit\" -c 0.8\n\n# Output shows confidence\n# Tapped element: Submit (95% confidence)\n</code></pre>"},{"location":"confidence-scoring/#checking-confidence","title":"Checking Confidence","text":"<pre><code># Check confidence score for a search\nditto confidence -t \"Setings\"\n# Output: Confidence for 'Setings': 78% (good)\n\nditto confidence -t \"Login\"\n# Output: Confidence for 'Login': 100% (excellent)\n</code></pre>"},{"location":"confidence-scoring/#waiting-with-confidence_1","title":"Waiting with Confidence","text":"<pre><code># Wait with confidence threshold\nditto wait -t \"Welcome\" -c 0.7 --timeout 15\n</code></pre>"},{"location":"confidence-scoring/#use-cases","title":"Use Cases","text":""},{"location":"confidence-scoring/#handling-typos-in-test-scripts","title":"Handling Typos in Test Scripts","text":"<pre><code># Will match \"Settings\" even with typo\nandroid.tap(\"Setings\", min_confidence=0.6)\n</code></pre>"},{"location":"confidence-scoring/#finding-similar-elements","title":"Finding Similar Elements","text":"<pre><code># Find all items that might match\nresults = android.find_all_with_confidence(\"Save\", min_confidence=0.4)\nfor r in results:\n    print(f\"{r.element.get('text', r.element.get('resource_id'))}: {r.confidence:.0%}\")\n\n# Output might show:\n# Save: 100%\n# Save Changes: 85%\n# Save Draft: 82%\n# Saved Items: 65%\n</code></pre>"},{"location":"confidence-scoring/#adaptive-automation","title":"Adaptive Automation","text":"<pre><code># Try high confidence first, fall back to lower\nresult = android.find_with_confidence(\"Submit\", min_confidence=0.9)\nif not result:\n    result = android.find_with_confidence(\"Submit\", min_confidence=0.5)\n    if result:\n        print(f\"Warning: Low confidence match ({result.confidence:.0%})\")\n\nif result:\n    android.tap(result.element['text'])\n</code></pre>"},{"location":"confidence-scoring/#debugging-element-finding","title":"Debugging Element Finding","text":"<pre><code># See why an element wasn't found\nresult = android.find_with_confidence(\"Login\", min_confidence=0.0)\nif result:\n    print(f\"Best match: {result.element.get('text')}\")\n    print(f\"Confidence: {result.confidence:.0%}\")\n    print(f\"Details: {result.match_details}\")\nelse:\n    print(\"No elements matched at all\")\n</code></pre>"},{"location":"confidence-scoring/#best-practices","title":"Best Practices","text":"<ol> <li>Start with default threshold (30%) for most cases</li> <li>Use higher thresholds (70-90%) for critical actions</li> <li>Use lower thresholds (20-40%) for exploratory searches</li> <li>Check confidence before critical actions like purchases</li> <li>Log confidence scores for debugging flaky tests</li> </ol>"},{"location":"confidence-scoring/#configuration","title":"Configuration","text":""},{"location":"confidence-scoring/#default-threshold","title":"Default Threshold","text":"<p>The default minimum confidence is 30% (0.3). This can be configured:</p> <pre><code># Per-instance\nandroid = Android(min_confidence=0.5)\n\n# Per-call\nandroid.find(\"Login\", min_confidence=0.8)\n</code></pre>"},{"location":"confidence-scoring/#scoring-weights","title":"Scoring Weights","text":"<p>The scoring weights are defined in <code>recorder/element_matcher.py</code>:</p> <pre><code>SCORE_WEIGHTS = {\n    \"text_exact\": 1.0,\n    \"text_contains\": 0.7,\n    \"text_fuzzy\": 0.5,\n    \"id_exact\": 1.0,\n    \"id_contains\": 0.8,\n    \"id_suffix\": 0.7,\n    \"desc_exact\": 1.0,\n    \"desc_contains\": 0.7,\n    \"desc_fuzzy\": 0.5,\n    \"class_match\": 0.3,\n    \"clickable_bonus\": 0.1,\n    \"enabled_bonus\": 0.05,\n}\n</code></pre>"},{"location":"getting-started/","title":"Getting Started","text":"<p>This guide will help you set up DittoMation and run your first automation.</p>"},{"location":"getting-started/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.8+</li> <li>ADB (Android Debug Bridge) installed and in PATH</li> <li>Android device with USB debugging enabled</li> </ul>"},{"location":"getting-started/#installing-adb","title":"Installing ADB","text":"WindowsmacOSLinux <pre><code># Download Android Platform Tools\n# https://developer.android.com/studio/releases/platform-tools\n# Add to PATH\n</code></pre> <pre><code>brew install android-platform-tools\n</code></pre> <pre><code>sudo apt install adb\n</code></pre>"},{"location":"getting-started/#enable-usb-debugging","title":"Enable USB Debugging","text":"<ol> <li>Go to Settings &gt; About Phone</li> <li>Tap Build Number 7 times</li> <li>Go back to Settings &gt; Developer Options</li> <li>Enable USB Debugging</li> <li>Connect your device via USB</li> <li>Accept the debugging prompt on your device</li> </ol>"},{"location":"getting-started/#installation","title":"Installation","text":"<pre><code>pip install dittomation\n</code></pre> <p>Verify installation:</p> <pre><code>ditto --version\n</code></pre> <p>Verify device connection:</p> <pre><code>adb devices\n</code></pre> <p>You should see your device listed.</p>"},{"location":"getting-started/#your-first-automation","title":"Your First Automation","text":""},{"location":"getting-started/#option-1-natural-language","title":"Option 1: Natural Language","text":"<p>The easiest way to start:</p> <pre><code>ditto nl \"open Settings\"\n</code></pre> <p>More examples:</p> <pre><code>ditto nl \"open Chrome, tap search bar, type hello world\"\nditto nl \"swipe up, scroll down, tap first item\"\nditto nl \"go back, go home\"\n</code></pre>"},{"location":"getting-started/#option-2-record-replay","title":"Option 2: Record &amp; Replay","text":"<p>Record your interactions:</p> <pre><code>ditto record --output my_workflow.json\n</code></pre> <p>Follow the prompts to record taps, swipes, and other gestures. Press <code>Ctrl+C</code> to stop.</p> <p>Replay the workflow:</p> <pre><code>ditto run my_workflow.json\n</code></pre>"},{"location":"getting-started/#option-3-python-api","title":"Option 3: Python API","text":"<pre><code>from core import Android\n\n# Connect to device\nandroid = Android()\n\n# Open an app\nandroid.open_app(\"Settings\")\n\n# Wait for element\nandroid.wait_for(\"Wi-Fi\", timeout=10)\n\n# Tap by text\nandroid.tap(\"Wi-Fi\")\n\n# Scroll down\nandroid.scroll(\"down\")\n\n# Go back\nandroid.press_back()\n</code></pre>"},{"location":"getting-started/#next-steps","title":"Next Steps","text":"<ul> <li>Smart Locator - Learn how element detection works</li> <li>Natural Language - Full command reference</li> <li>Control Flow - Variables, loops, and conditions</li> <li>API Reference - Complete API documentation</li> </ul>"},{"location":"quickstart/","title":"DittoMation Quick Start Guide","text":"<p>Get started with DittoMation in minutes. This guide covers installation, basic usage, and common workflows.</p>"},{"location":"quickstart/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.8 or higher</li> <li>Android device with USB debugging enabled</li> <li>ADB (Android Debug Bridge) installed</li> </ul>"},{"location":"quickstart/#enable-usb-debugging-on-android","title":"Enable USB Debugging on Android","text":"<ol> <li>Go to Settings &gt; About phone</li> <li>Tap Build number 7 times to enable Developer options</li> <li>Go to Settings &gt; Developer options</li> <li>Enable USB debugging</li> <li>Connect your device via USB and authorize the computer when prompted</li> </ol>"},{"location":"quickstart/#installation","title":"Installation","text":""},{"location":"quickstart/#option-1-install-from-source-recommended","title":"Option 1: Install from source (recommended)","text":"<pre><code># Clone the repository\ngit clone https://github.com/OmPrakashSingh1704/DittoMations.git\ncd DittoMations\n\n# Install in development mode\npip install -e .\n</code></pre>"},{"location":"quickstart/#option-2-install-dependencies-only","title":"Option 2: Install dependencies only","text":"<pre><code>pip install click\n</code></pre>"},{"location":"quickstart/#verify-installation","title":"Verify Installation","text":"<p>Check that your device is connected:</p> <pre><code># Using the CLI\nditto devices\n\n# Or using ADB directly\nadb devices\n</code></pre> <p>You should see your device listed with status \"device\".</p>"},{"location":"quickstart/#quick-start-python-api","title":"Quick Start: Python API","text":"<pre><code>from core import Android\n\n# Connect to device (auto-detects first connected device)\nandroid = Android()\n\n# Get device info\nprint(android.info())\n\n# Take a screenshot\nandroid.screenshot(\"screen.png\")\n\n# Tap at coordinates\nandroid.tap(500, 500)\n\n# Tap an element by text\nandroid.tap(\"Settings\")\n\n# Type text\nandroid.type(\"Hello World\")\n\n# Press buttons\nandroid.press_home()\nandroid.press_back()\n\n# Swipe gestures\nandroid.swipe(\"up\")\nandroid.swipe(\"down\")\n\n# Open an app\nandroid.open_app(\"Chrome\")\n</code></pre>"},{"location":"quickstart/#quick-start-cli","title":"Quick Start: CLI","text":"<pre><code># Get device info\nditto info\n\n# Take a screenshot\nditto screenshot\n\n# Tap at coordinates\nditto tap 500 500\n\n# Tap an element by text\nditto tap --text \"Settings\"\n\n# Type text\nditto type \"Hello World\"\n\n# Press buttons\nditto press home\nditto press back\n\n# Swipe gestures\nditto swipe up\nditto swipe down\n\n# Open an app\nditto open Chrome\n</code></pre>"},{"location":"quickstart/#common-workflows","title":"Common Workflows","text":""},{"location":"quickstart/#navigate-to-settings-and-toggle-wi-fi","title":"Navigate to Settings and Toggle Wi-Fi","text":"<p>Python: <pre><code>from core import Android\n\nandroid = Android()\n\n# Open Settings\nandroid.open_app(\"Settings\")\nandroid.wait_for(\"Network\", timeout=10)\n\n# Tap on Network &amp; internet\nandroid.tap(\"Network\")\n\n# Wait for and tap Wi-Fi\nandroid.wait_for(\"Wi-Fi\", timeout=5)\nandroid.tap(\"Wi-Fi\")\n</code></pre></p> <p>CLI: <pre><code>ditto open Settings\nditto wait --text \"Network\" --timeout 10\nditto tap --text \"Network\"\nditto wait --text \"Wi-Fi\" --timeout 5\nditto tap --text \"Wi-Fi\"\n</code></pre></p>"},{"location":"quickstart/#search-in-an-app","title":"Search in an App","text":"<p>Python: <pre><code>from core import Android\n\nandroid = Android()\n\n# Open Chrome\nandroid.open_app(\"Chrome\")\n\n# Wait for the search bar and tap it\nandroid.wait_for(id=\"search_box\", timeout=10)\nandroid.tap(id=\"search_box\")\n\n# Type a search query\nandroid.type(\"DittoMation automation\")\nandroid.press_enter()\n</code></pre></p> <p>CLI: <pre><code>ditto open Chrome\nditto wait --id search_box --timeout 10\nditto tap --id search_box\nditto type \"DittoMation automation\"\nditto press enter\n</code></pre></p>"},{"location":"quickstart/#scroll-and-find-element","title":"Scroll and Find Element","text":"<p>Python: <pre><code>from core import Android\n\nandroid = Android()\n\n# Scroll down to find an element\nfor _ in range(5):\n    if android.exists(\"Target Item\"):\n        android.tap(\"Target Item\")\n        break\n    android.scroll(\"down\")\nelse:\n    print(\"Element not found after scrolling\")\n</code></pre></p>"},{"location":"quickstart/#take-multiple-screenshots","title":"Take Multiple Screenshots","text":"<p>Python: <pre><code>from core import Android\nimport time\n\nandroid = Android()\n\n# Take screenshots at intervals\nfor i in range(5):\n    android.screenshot(f\"screenshot_{i}.png\")\n    time.sleep(2)\n</code></pre></p>"},{"location":"quickstart/#element-finding","title":"Element Finding","text":"<p>DittoMation supports multiple strategies for finding elements:</p> Strategy Python CLI By text <code>android.tap(\"Login\")</code> <code>ditto tap --text \"Login\"</code> By resource-id <code>android.tap(id=\"btn_login\")</code> <code>ditto tap --id btn_login</code> By content-desc <code>android.tap(desc=\"Submit button\")</code> <code>ditto tap --desc \"Submit button\"</code> By coordinates <code>android.tap(100, 200)</code> <code>ditto tap 100 200</code>"},{"location":"quickstart/#finding-vs-waiting","title":"Finding vs Waiting","text":"<ul> <li>find() - Single attempt to find an element</li> <li>wait_for() - Polls repeatedly until element appears or timeout</li> </ul> <pre><code># Single attempt (returns None if not found)\nelement = android.find(\"Login\")\n\n# Wait up to 10 seconds for element\nelement = android.wait_for(\"Login\", timeout=10)\n</code></pre>"},{"location":"quickstart/#error-handling","title":"Error Handling","text":"<pre><code>from core import Android\nfrom core.exceptions import DeviceNotFoundError, ElementNotFoundError\n\ntry:\n    android = Android()\nexcept DeviceNotFoundError:\n    print(\"No device connected. Please connect a device and enable USB debugging.\")\n\n# Safe element interaction\nelement = android.find(\"Login\")\nif element:\n    android.tap(\"Login\")\nelse:\n    print(\"Login button not found\")\n</code></pre>"},{"location":"quickstart/#confidence-scoring","title":"Confidence Scoring","text":"<p>DittoMation uses confidence scoring for fuzzy element matching. This means:</p> <ul> <li>Elements are scored 0-100% based on how well they match</li> <li>Default threshold is 30% - matches above this are returned</li> <li>You can adjust the threshold for stricter or looser matching</li> </ul> <pre><code># Fuzzy matching - will find \"Settings\" even with typo\nandroid.tap(\"Setings\", min_confidence=0.5)\n\n# Check confidence score\nscore = android.get_confidence(\"Login\")\nprint(f\"Match confidence: {score:.0%}\")\n\n# Get detailed match information\nresult = android.find_with_confidence(\"Submit\")\nif result:\n    print(f\"Found with {result.confidence:.0%} confidence\")\n</code></pre> <pre><code># CLI with confidence\nditto tap -t \"Setings\" -c 0.5\nditto find -t \"Login\" --show-confidence\nditto confidence -t \"Lgoin\"  # Check confidence for typo\n</code></pre> <p>See Confidence Scoring Guide for full details.</p>"},{"location":"quickstart/#next-steps","title":"Next Steps","text":"<ul> <li>Read the Python API Reference for complete method documentation</li> <li>Read the CLI Reference for all available commands</li> <li>Read the Confidence Scoring Guide for fuzzy matching details</li> <li>Check approach.md for technical architecture details</li> </ul>"},{"location":"variables-and-control-flow/","title":"Variables and Control Flow Guide","text":"<p>DittoMation supports variables, expressions, and control flow constructs for building dynamic automation scripts.</p>"},{"location":"variables-and-control-flow/#table-of-contents","title":"Table of Contents","text":"<ul> <li>Variables</li> <li>Variable Resolution</li> <li>Expressions</li> <li>Control Flow</li> <li>Actions Reference</li> <li>Examples</li> </ul>"},{"location":"variables-and-control-flow/#variables","title":"Variables","text":"<p>Variables allow you to store and reuse values throughout your automation scripts.</p>"},{"location":"variables-and-control-flow/#defining-variables","title":"Defining Variables","text":"<p>Variables can be defined in multiple ways:</p> <p>1. In the script file: <pre><code>{\n  \"variables\": {\n    \"username\": \"testuser\",\n    \"password\": \"secret123\",\n    \"max_retries\": 3,\n    \"items\": [\"Item A\", \"Item B\", \"Item C\"]\n  },\n  \"steps\": [...]\n}\n</code></pre></p> <p>2. Via command line: <pre><code>ditto run script.json --var username=myuser --var count=5\n</code></pre></p> <p>3. From a variables file: <pre><code>ditto run script.json --vars-file config.json\n</code></pre></p> <p>4. Using set_variable action: <pre><code>{\"action\": \"set_variable\", \"variable\": \"counter\", \"value\": \"0\"}\n{\"action\": \"set_variable\", \"variable\": \"greeting\", \"expr\": \"'Hello, ' + username\"}\n</code></pre></p>"},{"location":"variables-and-control-flow/#variable-priority","title":"Variable Priority","text":"<p>When the same variable is defined in multiple places, the priority is: 1. CLI <code>--var</code> options (highest) 2. <code>--vars-file</code> file 3. Script <code>variables</code> section (lowest)</p>"},{"location":"variables-and-control-flow/#variable-resolution","title":"Variable Resolution","text":"<p>Use <code>{{variable}}</code> syntax to reference variables in step fields.</p>"},{"location":"variables-and-control-flow/#supported-fields","title":"Supported Fields","text":"<p>Variables can be used in these step fields: - <code>text</code>, <code>id</code>, <code>desc</code> - Element locators - <code>value</code> - For type action - <code>app</code> - App name for open action - <code>message</code> - For log action - <code>direction</code> - For swipe/scroll</p>"},{"location":"variables-and-control-flow/#basic-usage","title":"Basic Usage","text":"<pre><code>{\n  \"variables\": {\"username\": \"john\"},\n  \"steps\": [\n    {\"action\": \"type\", \"value\": \"{{username}}\"},\n    {\"action\": \"log\", \"message\": \"Logged in as {{username}}\"}\n  ]\n}\n</code></pre>"},{"location":"variables-and-control-flow/#nested-access","title":"Nested Access","text":"<p>Access nested object properties with dot notation:</p> <pre><code>{\n  \"variables\": {\n    \"user\": {\"name\": \"Alice\", \"email\": \"alice@example.com\"}\n  },\n  \"steps\": [\n    {\"action\": \"type\", \"value\": \"{{user.name}}\"},\n    {\"action\": \"type\", \"value\": \"{{user.email}}\"}\n  ]\n}\n</code></pre>"},{"location":"variables-and-control-flow/#array-access","title":"Array Access","text":"<p>Access array elements with bracket notation:</p> <pre><code>{\n  \"variables\": {\n    \"items\": [\"first\", \"second\", \"third\"]\n  },\n  \"steps\": [\n    {\"action\": \"tap\", \"text\": \"{{items[0]}}\"},\n    {\"action\": \"tap\", \"text\": \"{{items[1]}}\"}\n  ]\n}\n</code></pre>"},{"location":"variables-and-control-flow/#default-values","title":"Default Values","text":"<p>Provide default values with the pipe syntax:</p> <pre><code>{\"action\": \"type\", \"value\": \"{{username|guest}}\"}\n</code></pre> <p>If <code>username</code> is not defined, \"guest\" will be used.</p>"},{"location":"variables-and-control-flow/#expressions","title":"Expressions","text":"<p>The expression engine allows evaluating conditions and computing values safely.</p>"},{"location":"variables-and-control-flow/#supported-operations","title":"Supported Operations","text":"<p>Comparisons: - <code>==</code>, <code>!=</code>, <code>&lt;</code>, <code>&gt;</code>, <code>&lt;=</code>, <code>&gt;=</code> - <code>in</code>, <code>not in</code></p> <p>Boolean: - <code>and</code>, <code>or</code>, <code>not</code></p> <p>Arithmetic: - <code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>, <code>//</code>, <code>%</code>, <code>**</code></p> <p>String Methods: - <code>.upper()</code>, <code>.lower()</code>, <code>.strip()</code> - <code>.startswith()</code>, <code>.endswith()</code> - <code>.replace()</code>, <code>.split()</code></p> <p>Built-in Functions: - <code>len()</code>, <code>str()</code>, <code>int()</code>, <code>float()</code>, <code>bool()</code> - <code>min()</code>, <code>max()</code>, <code>sum()</code>, <code>abs()</code>, <code>round()</code> - <code>any()</code>, <code>all()</code>, <code>sorted()</code>, <code>range()</code></p>"},{"location":"variables-and-control-flow/#element-functions","title":"Element Functions","text":"<p>These functions interact with the device UI:</p> Function Description <code>element_exists(text=, id=, desc=)</code> Check if element exists <code>element_text(text=, id=, desc=)</code> Get element's text content <code>element_count(text=, id=, desc=)</code> Count matching elements <code>element_visible(text=, id=, desc=)</code> Check if element is visible <p>Examples: <pre><code>{\"action\": \"if\", \"expr\": \"element_exists(text='Login')\"}\n{\"action\": \"if\", \"expr\": \"element_count(text='Item') &gt; 5\"}\n{\"action\": \"while\", \"expr\": \"not element_exists(text='Complete')\"}\n</code></pre></p>"},{"location":"variables-and-control-flow/#safety","title":"Safety","text":"<p>The expression engine is sandboxed: - No imports allowed - No file system access - No arbitrary code execution - Only whitelisted functions</p>"},{"location":"variables-and-control-flow/#control-flow","title":"Control Flow","text":""},{"location":"variables-and-control-flow/#if-elif-else","title":"if / elif / else","text":"<p>Conditional execution based on expressions:</p> <pre><code>{\n  \"action\": \"if\",\n  \"expr\": \"element_exists(text='Welcome')\",\n  \"then_steps\": [\n    {\"action\": \"log\", \"message\": \"Already logged in\"}\n  ],\n  \"else_steps\": [\n    {\"action\": \"tap\", \"text\": \"Login\"},\n    {\"action\": \"type\", \"value\": \"{{username}}\"},\n    {\"action\": \"tap\", \"text\": \"Submit\"}\n  ]\n}\n</code></pre> <p>With elif: <pre><code>{\n  \"action\": \"if\",\n  \"expr\": \"count &gt; 100\",\n  \"then_steps\": [\n    {\"action\": \"log\", \"message\": \"Large count\"}\n  ],\n  \"elif_blocks\": [\n    {\n      \"condition\": \"count &gt; 50\",\n      \"steps\": [{\"action\": \"log\", \"message\": \"Medium count\"}]\n    },\n    {\n      \"condition\": \"count &gt; 10\",\n      \"steps\": [{\"action\": \"log\", \"message\": \"Small count\"}]\n    }\n  ],\n  \"else_steps\": [\n    {\"action\": \"log\", \"message\": \"Very small count\"}\n  ]\n}\n</code></pre></p>"},{"location":"variables-and-control-flow/#for","title":"for","text":"<p>Iterate over a list of items:</p> <pre><code>{\n  \"action\": \"for\",\n  \"items\": \"['Item A', 'Item B', 'Item C']\",\n  \"item_var\": \"item\",\n  \"index_var\": \"idx\",\n  \"loop_steps\": [\n    {\"action\": \"tap\", \"text\": \"{{item}}\"},\n    {\"action\": \"wait\", \"timeout\": 0.5}\n  ],\n  \"max_iterations\": 100\n}\n</code></pre> <p>Using a variable as items: <pre><code>{\n  \"variables\": {\"products\": [\"Phone\", \"Tablet\", \"Laptop\"]},\n  \"steps\": [\n    {\n      \"action\": \"for\",\n      \"items\": \"products\",\n      \"item_var\": \"product\",\n      \"loop_steps\": [\n        {\"action\": \"tap\", \"text\": \"{{product}}\"}\n      ]\n    }\n  ]\n}\n</code></pre></p>"},{"location":"variables-and-control-flow/#while","title":"while","text":"<p>Loop while condition is true:</p> <pre><code>{\n  \"action\": \"while\",\n  \"expr\": \"counter &lt; 5\",\n  \"counter_var\": \"iteration\",\n  \"loop_steps\": [\n    {\"action\": \"log\", \"message\": \"Iteration {{iteration}}\"},\n    {\"action\": \"set_variable\", \"variable\": \"counter\", \"expr\": \"counter + 1\"}\n  ],\n  \"max_iterations\": 100\n}\n</code></pre>"},{"location":"variables-and-control-flow/#until","title":"until","text":"<p>Loop until condition becomes true:</p> <pre><code>{\n  \"action\": \"until\",\n  \"expr\": \"element_exists(text='Success')\",\n  \"counter_var\": \"attempt\",\n  \"loop_steps\": [\n    {\"action\": \"log\", \"message\": \"Attempt {{attempt}}\"},\n    {\"action\": \"tap\", \"text\": \"Retry\"},\n    {\"action\": \"wait\", \"timeout\": 2}\n  ],\n  \"max_iterations\": 10\n}\n</code></pre>"},{"location":"variables-and-control-flow/#break-continue","title":"break / continue","text":"<p>Control loop execution:</p> <pre><code>{\n  \"action\": \"for\",\n  \"items\": \"range(10)\",\n  \"item_var\": \"i\",\n  \"loop_steps\": [\n    {\n      \"action\": \"if\",\n      \"expr\": \"i == 5\",\n      \"then_steps\": [{\"action\": \"break\"}]\n    },\n    {\"action\": \"log\", \"message\": \"Processing {{i}}\"}\n  ]\n}\n</code></pre>"},{"location":"variables-and-control-flow/#actions-reference","title":"Actions Reference","text":""},{"location":"variables-and-control-flow/#set_variable","title":"set_variable","text":"<p>Set a variable value.</p> Field Required Description <code>variable</code> Yes Variable name <code>value</code> No Direct value to set <code>expr</code> No Expression to evaluate <p>Examples: <pre><code>{\"action\": \"set_variable\", \"variable\": \"count\", \"value\": \"0\"}\n{\"action\": \"set_variable\", \"variable\": \"doubled\", \"expr\": \"count * 2\"}\n{\"action\": \"set_variable\", \"variable\": \"name\", \"expr\": \"'Hello, ' + username\"}\n</code></pre></p>"},{"location":"variables-and-control-flow/#extract","title":"extract","text":"<p>Extract data from a UI element into a variable.</p> Field Required Description <code>variable</code> Yes Variable name to store result <code>text/id/desc</code> Yes Element locator <code>extract_source</code> No What to extract: <code>text</code>, <code>attribute</code>, <code>bounds</code>, <code>resource_id</code>, <code>content_desc</code>, <code>class</code> (default: <code>text</code>) <code>extract_attr</code> No Attribute name when <code>extract_source=\"attribute\"</code> <code>regex</code> No Regex pattern to extract substring <p>Examples: <pre><code>{\"action\": \"extract\", \"variable\": \"balance\", \"text\": \"Balance:\", \"extract_source\": \"text\"}\n{\"action\": \"extract\", \"variable\": \"amount\", \"id\": \"price\", \"regex\": \"\\\\$([\\\\d,]+\\\\.\\\\d{2})\"}\n</code></pre></p>"},{"location":"variables-and-control-flow/#log","title":"log","text":"<p>Log a message.</p> Field Required Description <code>message</code> Yes Message to log <code>level</code> No Log level: <code>debug</code>, <code>info</code>, <code>warning</code>, <code>error</code> (default: <code>info</code>) <p>Examples: <pre><code>{\"action\": \"log\", \"message\": \"Starting login process\"}\n{\"action\": \"log\", \"message\": \"Error: {{error_msg}}\", \"level\": \"error\"}\n</code></pre></p>"},{"location":"variables-and-control-flow/#assert","title":"assert","text":"<p>Assert a condition is true.</p> Field Required Description <code>expr</code> Yes Condition to assert <code>message</code> No Error message if assertion fails <p>Examples: <pre><code>{\"action\": \"assert\", \"expr\": \"count &gt; 0\", \"message\": \"Count must be positive\"}\n{\"action\": \"assert\", \"expr\": \"element_exists(text='Success')\"}\n</code></pre></p>"},{"location":"variables-and-control-flow/#examples","title":"Examples","text":""},{"location":"variables-and-control-flow/#login-with-retry","title":"Login with Retry","text":"<pre><code>{\n  \"name\": \"login_with_retry\",\n  \"variables\": {\n    \"username\": \"testuser\",\n    \"password\": \"secret123\",\n    \"max_attempts\": 3\n  },\n  \"steps\": [\n    {\"action\": \"open\", \"app\": \"MyApp\"},\n    {\"action\": \"wait\", \"timeout\": 2},\n    {\n      \"action\": \"set_variable\",\n      \"variable\": \"attempt\",\n      \"value\": \"0\"\n    },\n    {\n      \"action\": \"until\",\n      \"expr\": \"element_exists(text='Welcome') or attempt &gt;= max_attempts\",\n      \"loop_steps\": [\n        {\"action\": \"set_variable\", \"variable\": \"attempt\", \"expr\": \"attempt + 1\"},\n        {\"action\": \"log\", \"message\": \"Login attempt {{attempt}}\"},\n        {\"action\": \"tap\", \"text\": \"Login\"},\n        {\"action\": \"type\", \"value\": \"{{username}}\"},\n        {\"action\": \"tap\", \"text\": \"Next\"},\n        {\"action\": \"type\", \"value\": \"{{password}}\"},\n        {\"action\": \"tap\", \"text\": \"Submit\"},\n        {\"action\": \"wait\", \"timeout\": 3}\n      ],\n      \"max_iterations\": 5\n    },\n    {\n      \"action\": \"assert\",\n      \"expr\": \"element_exists(text='Welcome')\",\n      \"message\": \"Login failed after max attempts\"\n    }\n  ]\n}\n</code></pre>"},{"location":"variables-and-control-flow/#process-list-of-items","title":"Process List of Items","text":"<pre><code>{\n  \"name\": \"process_items\",\n  \"variables\": {\n    \"items\": [\"Product A\", \"Product B\", \"Product C\"]\n  },\n  \"steps\": [\n    {\"action\": \"open\", \"app\": \"Shopping\"},\n    {\"action\": \"wait\", \"timeout\": 2},\n    {\n      \"action\": \"for\",\n      \"items\": \"items\",\n      \"item_var\": \"product\",\n      \"index_var\": \"idx\",\n      \"loop_steps\": [\n        {\"action\": \"log\", \"message\": \"Processing item {{idx}}: {{product}}\"},\n        {\"action\": \"tap\", \"text\": \"Search\"},\n        {\"action\": \"type\", \"value\": \"{{product}}\"},\n        {\"action\": \"tap\", \"text\": \"Go\"},\n        {\"action\": \"wait\", \"timeout\": 1},\n        {\n          \"action\": \"if\",\n          \"expr\": \"element_exists(text='Add to Cart')\",\n          \"then_steps\": [\n            {\"action\": \"tap\", \"text\": \"Add to Cart\"},\n            {\"action\": \"log\", \"message\": \"Added {{product}} to cart\"}\n          ],\n          \"else_steps\": [\n            {\"action\": \"log\", \"message\": \"{{product}} not available\", \"level\": \"warning\"}\n          ]\n        },\n        {\"action\": \"press\", \"value\": \"back\"}\n      ]\n    },\n    {\"action\": \"log\", \"message\": \"Processed all items\"}\n  ]\n}\n</code></pre>"},{"location":"variables-and-control-flow/#wait-for-loading","title":"Wait for Loading","text":"<pre><code>{\n  \"name\": \"wait_for_loading\",\n  \"steps\": [\n    {\"action\": \"tap\", \"text\": \"Load Data\"},\n    {\n      \"action\": \"until\",\n      \"expr\": \"not element_exists(text='Loading...')\",\n      \"loop_steps\": [\n        {\"action\": \"log\", \"message\": \"Still loading...\", \"level\": \"debug\"},\n        {\"action\": \"wait\", \"timeout\": 1}\n      ],\n      \"max_iterations\": 30\n    },\n    {\"action\": \"log\", \"message\": \"Loading complete\"},\n    {\"action\": \"screenshot\", \"value\": \"loaded_screen.png\"}\n  ]\n}\n</code></pre>"},{"location":"variables-and-control-flow/#python-api","title":"Python API","text":"<p>You can also use variables and control flow from Python:</p> <pre><code>from core.automation import Automation, Step\n\n# Create automation with initial variables\nauto = Automation(initial_vars={\"username\": \"test\"})\n\n# Set variables programmatically\nauto.set_variable(\"count\", 5)\n\n# Run with additional variables\nresult = auto.run(steps, initial_vars={\"password\": \"secret\"})\n\n# Get variable value\nvalue = auto.get_variable(\"count\")\n</code></pre>"},{"location":"variables-and-control-flow/#direct-expression-evaluation","title":"Direct Expression Evaluation","text":"<pre><code>from core.variables import VariableContext\nfrom core.expressions import SafeExpressionEngine\n\nctx = VariableContext({\"x\": 10, \"name\": \"test\"})\nengine = SafeExpressionEngine(ctx)\n\n# Evaluate expressions\nresult = engine.evaluate(\"x &gt; 5\")\nprint(result.value)  # True\n\nresult = engine.evaluate(\"name.upper()\")\nprint(result.value)  # \"TEST\"\n\n# Boolean evaluation\nif engine.evaluate_bool(\"x &gt; 5 and len(name) &gt; 3\"):\n    print(\"Condition met\")\n</code></pre>"},{"location":"features/natural-language/","title":"Natural Language Commands","text":"<p>Control Android devices using plain English commands.</p>"},{"location":"features/natural-language/#basic-usage","title":"Basic Usage","text":"<pre><code>ditto nl \"open Settings, tap Wi-Fi, toggle first switch\"\n</code></pre> <p>Or in Python:</p> <pre><code>from replayer.nl_runner import execute_nl_command\n\nexecute_nl_command(\"open YouTube, search for cats, play first video\")\n</code></pre>"},{"location":"features/natural-language/#command-reference","title":"Command Reference","text":""},{"location":"features/natural-language/#app-control","title":"App Control","text":"Command Example Open app <code>open YouTube</code>, <code>open Settings</code>, <code>launch Chrome</code> Close app <code>close app</code>, <code>force stop</code>"},{"location":"features/natural-language/#touch-gestures","title":"Touch Gestures","text":"Command Example Tap <code>tap Login</code>, <code>tap the search button</code>, <code>click Submit</code> Long press <code>long press icon</code>, <code>hold Settings</code> Double tap <code>double tap image</code>"},{"location":"features/natural-language/#swipe-scroll","title":"Swipe &amp; Scroll","text":"Command Example Swipe <code>swipe up</code>, <code>swipe left</code>, <code>swipe down slowly</code> Scroll <code>scroll down</code>, <code>scroll to bottom</code>, <code>scroll up</code>"},{"location":"features/natural-language/#text-input","title":"Text Input","text":"Command Example Type <code>type hello world</code>, <code>enter password123</code>, <code>input test@email.com</code> Clear <code>clear text</code>, <code>clear field</code>"},{"location":"features/natural-language/#navigation","title":"Navigation","text":"Command Example Back <code>go back</code>, <code>press back</code>, <code>back</code> Home <code>go home</code>, <code>press home</code>, <code>home</code> Recent apps <code>recent apps</code>, <code>open recents</code>"},{"location":"features/natural-language/#wait","title":"Wait","text":"Command Example Wait <code>wait 5 seconds</code>, <code>wait 2s</code>, <code>pause 3 seconds</code> Wait for element <code>wait for Login button</code>"},{"location":"features/natural-language/#phone-functions","title":"Phone Functions","text":"Command Example Call <code>call 1234567890</code>, <code>dial +1-555-123-4567</code> SMS <code>send SMS to 1234567890</code>"},{"location":"features/natural-language/#chaining-commands","title":"Chaining Commands","text":"<p>Use commas to chain multiple commands:</p> <pre><code>ditto nl \"open Chrome, tap search, type github, tap first result\"\n</code></pre> <p>Each command executes sequentially with automatic delays.</p>"},{"location":"features/natural-language/#examples","title":"Examples","text":""},{"location":"features/natural-language/#login-flow","title":"Login Flow","text":"<pre><code>ditto nl \"open MyApp, tap Login, type testuser, tap password field, type secret123, tap Submit\"\n</code></pre>"},{"location":"features/natural-language/#social-media","title":"Social Media","text":"<pre><code>ditto nl \"open Instagram, tap search, type cats, tap first post, double tap to like\"\n</code></pre>"},{"location":"features/natural-language/#settings","title":"Settings","text":"<pre><code>ditto nl \"open Settings, scroll down, tap About Phone, tap Build Number 7 times\"\n</code></pre>"},{"location":"features/natural-language/#navigation_1","title":"Navigation","text":"<pre><code>ditto nl \"open Maps, type coffee shops, tap first result, tap Directions\"\n</code></pre>"},{"location":"features/natural-language/#tips","title":"Tips","text":"<ol> <li>Be specific - \"tap Login button\" is better than \"tap button\"</li> <li>Use delays - Add \"wait 2 seconds\" between commands if needed</li> <li>Check elements - Use <code>ditto ui</code> to see current screen elements</li> </ol>"},{"location":"features/record-replay/","title":"Record &amp; Replay","text":"<p>Capture your interactions and replay them with smart element matching.</p>"},{"location":"features/record-replay/#recording","title":"Recording","text":""},{"location":"features/record-replay/#interactive-recording","title":"Interactive Recording","text":"<pre><code>ditto record --output workflow.json\n</code></pre> <p>Follow the prompts:</p> <ol> <li>Choose gesture type (tap, swipe, scroll, etc.)</li> <li>Perform the gesture on your device</li> <li>DittoMation captures the element and coordinates</li> <li>Repeat until done</li> <li>Press <code>Ctrl+C</code> to save</li> </ol>"},{"location":"features/record-replay/#automated-recording","title":"Automated Recording","text":"<pre><code>ditto record --auto --output workflow.json\n</code></pre> <p>This captures touch events automatically using <code>getevent</code>.</p>"},{"location":"features/record-replay/#workflow-format","title":"Workflow Format","text":"<p>Recorded workflows are saved as JSON:</p> <pre><code>{\n  \"name\": \"Login Flow\",\n  \"steps\": [\n    {\n      \"id\": 1,\n      \"gesture\": {\n        \"type\": \"tap\",\n        \"start\": [540, 350]\n      },\n      \"locator\": {\n        \"primary\": {\"strategy\": \"id\", \"value\": \"username_input\"},\n        \"fallbacks\": [\n          {\"strategy\": \"content_desc\", \"value\": \"Enter username\"},\n          {\"strategy\": \"text\", \"value\": \"Username\"}\n        ],\n        \"bounds\": [100, 300, 980, 400]\n      },\n      \"element\": {\n        \"class\": \"android.widget.EditText\",\n        \"resource_id\": \"com.example:id/username_input\",\n        \"text\": \"\",\n        \"content_desc\": \"Enter username\"\n      }\n    },\n    {\n      \"id\": 2,\n      \"gesture\": {\n        \"type\": \"tap\",\n        \"start\": [540, 650]\n      },\n      \"locator\": {\n        \"primary\": {\"strategy\": \"id\", \"value\": \"login_btn\"},\n        \"fallbacks\": [\n          {\"strategy\": \"text\", \"value\": \"Login\"},\n          {\"strategy\": \"text\", \"value\": \"Sign In\"}\n        ]\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"features/record-replay/#replaying","title":"Replaying","text":""},{"location":"features/record-replay/#basic-replay","title":"Basic Replay","text":"<pre><code>ditto run workflow.json\n</code></pre>"},{"location":"features/record-replay/#with-variables","title":"With Variables","text":"<pre><code>ditto run workflow.json --var username=testuser --var password=secret\n</code></pre>"},{"location":"features/record-replay/#with-delay","title":"With Delay","text":"<pre><code>ditto run workflow.json --delay 1000  # 1 second between steps\n</code></pre>"},{"location":"features/record-replay/#gestures-supported","title":"Gestures Supported","text":"Gesture Description <code>tap</code> Single tap <code>long_press</code> Press and hold <code>swipe</code> Directional swipe <code>scroll</code> Scroll gesture <code>pinch</code> Zoom in/out"},{"location":"features/record-replay/#smart-replay","title":"Smart Replay","text":"<p>When replaying, DittoMation:</p> <ol> <li>Finds the element using the locator chain</li> <li>Falls back if primary locator fails</li> <li>Calculates new coordinates based on found element</li> <li>Executes the gesture at the correct position</li> </ol> <p>This means your workflow works even if:</p> <ul> <li>Element moved to a different position</li> <li>Screen size changed</li> <li>Resource ID was renamed (if fallbacks exist)</li> </ul>"},{"location":"features/record-replay/#editing-workflows","title":"Editing Workflows","text":"<p>You can manually edit the JSON to:</p> <ul> <li>Add more fallback strategies</li> <li>Change gesture parameters</li> <li>Add variables with <code>{{variable}}</code> syntax</li> <li>Add control flow (loops, conditions)</li> </ul> <p>Example with variables:</p> <pre><code>{\n  \"id\": 1,\n  \"action\": \"type\",\n  \"text\": \"{{username}}\"\n}\n</code></pre>"},{"location":"features/smart-locator/","title":"Smart Locator","text":"<p>DittoMation's smart locator finds UI elements using multiple strategies with automatic fallback.</p>"},{"location":"features/smart-locator/#how-it-works","title":"How It Works","text":"<p>When you target an element, DittoMation tries to find it using this fallback chain:</p> <pre><code>resource-id \u2192 content-desc \u2192 text \u2192 xpath \u2192 coordinates (last resort)\n</code></pre> <p>Each strategy has a confidence score (0-100%). The locator returns the best match above the threshold.</p>"},{"location":"features/smart-locator/#fallback-chain","title":"Fallback Chain","text":""},{"location":"features/smart-locator/#1-resource-id-highest-priority","title":"1. Resource ID (Highest Priority)","text":"<pre><code>android.tap(id=\"login_btn\")\n</code></pre> <ul> <li>Most stable identifier</li> <li>Survives text/layout changes</li> <li>Confidence: 95-100%</li> </ul>"},{"location":"features/smart-locator/#2-content-description","title":"2. Content Description","text":"<pre><code>android.tap(desc=\"Login button\")\n</code></pre> <ul> <li>Accessibility labels</li> <li>Good for buttons/icons without text</li> <li>Confidence: 90-100%</li> </ul>"},{"location":"features/smart-locator/#3-text","title":"3. Text","text":"<pre><code>android.tap(\"Login\")\n</code></pre> <ul> <li>Visible text on screen</li> <li>Supports fuzzy matching</li> <li>Confidence: 70-100%</li> </ul>"},{"location":"features/smart-locator/#4-xpath","title":"4. XPath","text":"<pre><code># In workflow JSON\n{\"strategy\": \"xpath\", \"value\": \"//Button[@text='Login']\"}\n</code></pre> <ul> <li>Structural matching</li> <li>Last resort before coordinates</li> <li>Confidence: 30-90%</li> </ul>"},{"location":"features/smart-locator/#5-coordinates-fallback","title":"5. Coordinates (Fallback)","text":"<p>Used only when all other strategies fail.</p> <ul> <li>Least reliable</li> <li>Breaks on different screen sizes</li> <li>Confidence: 0%</li> </ul>"},{"location":"features/smart-locator/#confidence-scoring","title":"Confidence Scoring","text":"<p>Every match has a confidence score:</p> Score Rating Meaning 90-100% Excellent Exact match 70-89% Good High confidence 50-69% Fair Acceptable 30-49% Low May be wrong 0-29% Very Low Likely wrong"},{"location":"features/smart-locator/#setting-minimum-confidence","title":"Setting Minimum Confidence","text":"<pre><code>android = Android(min_confidence=0.5)  # 50% minimum\n\n# Or per-call\nandroid.tap(\"Login\", min_confidence=0.8)  # 80% for this tap only\n</code></pre>"},{"location":"features/smart-locator/#getting-confidence-score","title":"Getting Confidence Score","text":"<pre><code>result = android.find_with_confidence(\"Login\")\nif result:\n    print(f\"Found with {result.confidence:.0%} confidence\")\n    print(f\"Strategy: {result.strategy_used}\")\n</code></pre>"},{"location":"features/smart-locator/#fuzzy-matching","title":"Fuzzy Matching","text":"<p>DittoMation supports fuzzy matching for text and content descriptions:</p> <pre><code># These all find \"Login Button\"\nandroid.tap(\"Login\")         # Partial match\nandroid.tap(\"login button\")  # Case insensitive\nandroid.tap(\"Logn\")          # Typo tolerance (similarity &gt; 0.4)\n</code></pre>"},{"location":"features/smart-locator/#example-surviving-ui-changes","title":"Example: Surviving UI Changes","text":"<p>Original app (v1.0): <pre><code>&lt;Button resource-id=\"login_btn\" text=\"Login\"/&gt;\n</code></pre></p> <p>Updated app (v2.0): <pre><code>&lt;Button resource-id=\"btn_sign_in\" text=\"Sign In\"/&gt;\n</code></pre></p> <p>Coordinate-based automation: FAILS</p> <p>DittoMation with fallbacks:</p> <pre><code>{\n  \"locator\": {\n    \"primary\": {\"strategy\": \"id\", \"value\": \"login_btn\"},\n    \"fallbacks\": [\n      {\"strategy\": \"id\", \"value\": \"btn_sign_in\"},\n      {\"strategy\": \"text\", \"value\": \"Login\"},\n      {\"strategy\": \"text\", \"value\": \"Sign In\"}\n    ]\n  }\n}\n</code></pre> <p>Result: Finds via <code>btn_sign_in</code> with 95% confidence.</p>"},{"location":"features/smart-locator/#ad-filtering","title":"Ad Filtering","text":"<p>DittoMation automatically filters out ad elements:</p> <pre><code># Ads are skipped by default\nandroid.tap(\"Download\")  # Won't tap ad download buttons\n\n# Disable if needed\nlocator = ElementLocator(filter_ads=False)\n</code></pre>"}]}